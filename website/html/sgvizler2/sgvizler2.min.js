!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).sgvizler2={})}(this,(function(t){"use strict";var e,a=Object.freeze({__proto__:null,get sgvizler(){return bt},get bordercloud(){return ft},get google(){return wt},get d3(){return vt},get leaflet(){return _t},get VERSION(){return At},get HOMEPAGE(){return Tt},get containerLoadAll(){return Rt},get containerDraw(){return Ot},get containerDrawAll(){return Et},get selectDraw(){return yt},get selectDrawAll(){return St},get getChartDoc(){return Nt},get getChartOptions(){return It},get encodeHtml(){return zt},get decodeHtml(){return Lt},get giveHTMLAndScript(){return xt},get showTabHtmlAndScript(){return Pt},get create(){return Dt}});
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function i(t,e,a,i){return new(a||(a=Promise))((function(r,n){function s(t){try{l(i.next(t))}catch(t){n(t)}}function o(t){try{l(i.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(s,o)}l((i=i.apply(t,e||[])).next())}))}!function(t){t[t.EMPTY=0]="EMPTY",t[t.UNKNOWN=1]="UNKNOWN",t[t.VARIABLE=2]="VARIABLE",t[t.STYLE=3]="STYLE",t[t.CLASS=4]="CLASS",t[t.WIKI=5]="WIKI",t[t.OBJECT=6]="OBJECT"}(e||(e={}));class r{constructor(){this.options={},this._tabDependences=[],this._patternOptions=e.EMPTY,this._width="",this._height="",this._optionsRaw="",this._class="",this._style="",this._width="100%",this._isDone=!1;let t=this;c.on("loaded",()=>{null!=t.container&&!t._isDone&&t.isLoadedAllDependencies()&&null!==t._resultSparql&&void 0!==t._resultSparql&&t.doDraw()})}loadDependenciesAndDraw(t){return i(this,void 0,void 0,(function*(){f.log(this.container,"Chart loaded dependencies : "+this.container.id),this._resultSparql=t,this.isLoadedAllDependencies()?yield this.doDraw():yield this.loadDependencies()}))}loadDependencies(){return i(this,void 0,void 0,(function*(){let t=[];for(let e of this._tabDependences)t.push(e.load());return Promise.all(t)}))}get patternOptions(){return this._patternOptions}get classHtml(){return this._class}set classHtml(t){this._class=t}get style(){return this._style}set style(t){this._style=t}get container(){return this._container}set container(t){this._container=t}get optionsRaw(){return this._optionsRaw}set optionsRaw(t){this._optionsRaw=t,this.doParseOptionsRaw()}get newOptionsRaw(){return this.optionsRaw}get height(){return this._height}set height(t){this._height=t}get width(){return this._width}set width(t){this._width=t}getHTMLStyleOrClass(){let t="",a=this.options;return this._patternOptions===e.CLASS&&(t=Object.keys(a).map(t=>"${opts[property]}").join(" "),t='class="'+t+'"'),this._patternOptions===e.STYLE&&(t=Object.keys(a).map(t=>"${property}:${opts[property]}").join(";"),t='style="'+t+'"'),t}addScript(t,e){let a=new u(t,e);return this._tabDependences.push(a),a}addCss(t,e){let a=new h(t,e);return this._tabDependences.push(a),a}isLoadedAllDependencies(){for(let t of this._tabDependences)if(!c.isLoaded(t))return!1;return!0}doDraw(){f.log(this.container,"Chart started : "+this._container.id);let t=this,e=!1;if(null===t._resultSparql||void 0===t._resultSparql)e=!0;else{let a=t._resultSparql.head.vars,i=t._resultSparql.results.bindings,r=a.length;i.length;0===r&&(e=!0)}e?(f.displayFeedback(t._container,n.ERROR_DATA_EMPTY),f.log(t.container,"Chart finished with error : "+t._container.id)):t.draw(t._resultSparql).then((function(e){t._isDone=!0,f.log(t.container,"Chart finished : "+t._container.id),f.fireDoneEvent(t._container)}),(function(e){console.log(e),f.displayFeedback(t._container,n.ERROR_CHART,[e]),f.log(t.container,"Chart finished with error : "+t._container.id)}))}execPattern(t,e){let a,i=this._optionsRaw;for(;null!==(a=t.exec(i));)b.assignProperty(this.options,a[1],a[2].trim()),this._patternOptions=e}doParseOptionsRaw(){let t=/\|? *([^=]*) *= *([^=|]*)/iy,a=/([^:]+):([^:;]+) *;?/iy,i=/([^ |;]+) ?/iy,r=/\!? *([^=]*) *= *([^=!]*)/iy,s=this._optionsRaw;if(this._patternOptions=""===s?e.EMPTY:e.UNKNOWN,0===this._optionsRaw.indexOf("{")&&this.patternOptions===e.UNKNOWN&&(this._patternOptions=e.OBJECT),-1===this._optionsRaw.indexOf("|")&&this.patternOptions===e.UNKNOWN&&this.execPattern(r,e.WIKI),this.patternOptions===e.UNKNOWN&&this.execPattern(t,e.VARIABLE),this.patternOptions===e.UNKNOWN&&this.execPattern(a,e.STYLE),this.patternOptions===e.UNKNOWN){let t,a=this._optionsRaw,r=0;for(;null!==(t=i.exec(a));)this.options["class"+r]=t[2],this._patternOptions=e.UNKNOWN,r++}this.patternOptions===e.UNKNOWN?f.displayFeedback(this.container,n.ERROR_CHART_PATTERN_OPTION_UNKNOWN,[this._optionsRaw]):this.patternOptions!==e.WIKI&&this.patternOptions!==e.VARIABLE&&this.patternOptions!==e.STYLE||(void 0!==this.options.width&&(this.width=this.options.width),void 0!==this.options.height&&(this.height=this.options.height))}}var n,s,o,l=Object.freeze({__proto__:null,Table:class extends r{get icon(){return"fa fa-table"}get label(){return"Table"}get subtext(){return"simple table"}get classFullName(){return"sgvizler.visualization.Table"}get tutorialFilename(){return"tutorial-sgvizler_visualization_Table.html"}constructor(){super()}draw(t){let e=this;return new Promise((function(a,i){let r=Object.assign({headings:"true"},e.options),n=t.head.vars,s=t.results.bindings,o=(n.length,s.length,"<table "+e.getHTMLStyleOrClass()+" >");if("true"===r.headings){o+="<tr>";for(let t of n)o+="<th>"+t+"</th>";o+="</tr>"}for(let t of s){o+="<tr>";for(let e of n)o+="<td>"+t[e].value+"</td>";o+="</tr>"}o+="</table>";let l=document.getElementById(e.container.id);l&&(l.innerHTML=o),a()}))}}});class c{static on(t,e){"loaded"===t&&c._listCallEvent.push(e)}static detectRoot(){let t=document.evaluate('//script[contains(@src,"sgvizler2.js")]/@src',document,null,XPathResult.STRING_TYPE,null).stringValue,e=/^(.*)sgvizler2\.js$/.exec(t);e&&(c._pathScripts=e[1])}static isLoad(t){return-1!==c._load.indexOf(t.url)}static isLoaded(t){return-1!==c._loaded.indexOf(t.url)}static load(t){t instanceof u?c.loadScript(t):t instanceof h&&c.loadCss(t)}static fireEvent(t){for(let e of c._listCallEvent)e(t)}static checkDependenciesToLoad(){c._dependenciesToLoad=c._dependenciesToLoad.filter((t,e,a)=>a.indexOf(t)===e);let t=c._dependenciesToLoad.length;for(let e=0;e<t;e++){let t=c._dependenciesToLoad[e];(void 0===t||c.isLoaded(t))&&delete this._dependenciesToLoad[e]}c._dependenciesToLoad.forEach(t=>{t instanceof u?c.loadScript(t):t instanceof u&&c.loadCss(t)})}static getAbsoluteURL(t){return t.match(/^(\/\/|https?)/)?t:c._pathScripts+t}static loadScript(t){let e=t.url;return new Promise((function(a,i){if(t.loadBefore&&!t.loadBefore.endDownload)return c._dependenciesToLoad.push(t),c.load(t.loadBefore),a();if(c.isLoad(t))return a();c._load.push(e),f.logSimple("Loading : "+t.url);let r=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.src=c.getAbsoluteURL(e),n.onload=function(){c._loaded.push(e),t.callBack(),c.fireEvent("loaded"),c.checkDependenciesToLoad()},r.appendChild(n)}))}static loadCss(t){let e=t.url;return new Promise((function(a,i){if(t.loadBefore&&!t.loadBefore.endDownload)return c._dependenciesToLoad.push(t),c.load(t.loadBefore),a();if(c.isLoad(t))return a();c._load.push(e);let r=document.getElementsByTagName("head")[0],n=document.createElement("link");n.rel="stylesheet",n.href=c.getAbsoluteURL(e),n.onload=function(){c._loaded.push(e),f.logSimple("Loaded : "+e),t.callBack(),c.fireEvent("loaded"),c.checkDependenciesToLoad()},r.appendChild(n)}))}}c._load=[],c._loaded=[],c._dependenciesToLoad=[],c._pathScripts="",c._listCallEvent=[];class d{constructor(t,e){this.url=t,this.loadBefore=e||null,this.endDownload=!1,this.startDownload=!1}load(){this.isLoaded()||(this.startDownload=!0,f.logSimple("Load started :"+this.url),c.load(this))}isLoaded(){return c.isLoaded(this)&&(this.startDownload=!0,this.endDownload=!0),this.endDownload}callBack(){this.endDownload=!0,f.logSimple("Load ended :"+this.url)}}class u extends d{}class h extends d{}class g{static getErrorMessageWithStatus200(t){let e=/MalformedQueryException: *(.*)/m.exec(t.response);return null!==e?e[1]:t.response}static getErrorWithOtherStatus(t,e){let a='<a href="'+e+'" target="_blank">See this error</a>',i="";return i=0===t.status?""!==t.statusText?t.statusText+"("+t.status+")":"You need to allow running insecure content in your navigator or this SPARQL service doesn't exist or timed out or CORS violation or no Access-Control-Allow-Origin header set. (see console log)":t.statusText+"("+t.status+")",i+"<br/>\n"+a}}class p{static drawWithElementId(t){return i(this,void 0,void 0,(function*(){let e=document.getElementById(t);e&&(yield p.draw(e))}))}static draw(t,e){return i(this,void 0,void 0,(function*(){let a=p.getSelectOptions(e);for(let e of a)t.appendChild(e.cloneNode(!0))}))}static drawAll(){let t=p.getSelectOptions(),e=document.evaluate("//select[contains(@class, '"+p.CLASS_NAME+"')]",document,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);for(let a=0;a<e.snapshotLength;a++)for(let i of t)e.snapshotItem(a).appendChild(i.cloneNode(!0))}static getChartDoc(t,e){let a=b.getObjectByPath(t),i="";return i=void 0!==e?e:w.DOCPATH,i+a.tutorialFilename}static getSelectOptions(t){let e,a,i,r,n,s,o,l,c=[],d=t&&t.selected?t.selected:this.classOfChartSelectedByDefault;for(let u of this.charts){i=document.createElement("optgroup"),r=document.createAttribute("label"),r.value=u.label,i.setAttributeNode(r);for(let r of u.charts)e=b.getObjectByPath(r),a=document.createElement("option"),s=document.createAttribute("data-icon"),s.value=e.icon,o=document.createAttribute("data-subtext"),"classFullName"===t.subtext?o.value=e.classFullName:o.value=e.subtext,n=document.createAttribute("value"),n.value=e.classFullName,d===r&&(l=document.createAttribute("selected"),a.setAttributeNode(l)),a.text=e.label,a.setAttributeNode(s),a.setAttributeNode(o),a.setAttributeNode(n),i.appendChild(a);c.push(i)}return c}}p.CLASS_NAME="sgvizler-select",p.classOfChartSelectedByDefault="bordercloud.visualization.DataTable",p.charts=[{label:"bordercloud.visualization",charts:["bordercloud.visualization.DataTable","bordercloud.visualization.PivotTable"]},{label:"leaflet.visualization",charts:["leaflet.visualization.Map"]},{label:"google.visualization",charts:["google.visualization.AnnotationChart","google.visualization.AreaChart","google.visualization.BarChart","google.visualization.BubbleChart","google.visualization.Calendar","google.visualization.CandlestickChart","google.visualization.ColumnChart","google.visualization.ComboChart","google.visualization.GeoChart","google.visualization.Histogram","google.visualization.IntervalChart","google.visualization.LineChart","google.visualization.Map","google.visualization.Pie","google.visualization.ScatterChart","google.visualization.SteppedAreaChart","google.visualization.Table","google.visualization.Trendline","google.visualization.Timeline","google.visualization.TreeMap"]},{label:"sgvizler.visualization",charts:["sgvizler.visualization.Table"]}],function(t){t[t.ERROR_CHART_UNKNOWN=0]="ERROR_CHART_UNKNOWN",t[t.ERROR_CHART_PATTERN_OPTION_UNKNOWN=1]="ERROR_CHART_PATTERN_OPTION_UNKNOWN",t[t.ERROR_REQUEST=2]="ERROR_REQUEST",t[t.ERROR_CHART=3]="ERROR_CHART",t[t.ERROR_DEPENDENCIES=4]="ERROR_DEPENDENCIES",t[t.ERROR_ENDPOINT_FORGOT=5]="ERROR_ENDPOINT_FORGOT",t[t.ERROR_DATA_EMPTY=6]="ERROR_DATA_EMPTY",t[t.ERROR_DATA_NOROW=7]="ERROR_DATA_NOROW"}(n||(n={}));class m{static get(t,e){let a="";switch(t){case n.ERROR_CHART_UNKNOWN:a="The chart $0 does not exist.";break;case n.ERROR_CHART_PATTERN_OPTION_UNKNOWN:a="The pattern of chart options is unknown : '$0'Use 'variable1=value1|variable1=value1' or for style 'width:100%;font:red;' or 'class1 class2'";break;case n.ERROR_REQUEST:a="Sorry, the sparql server sent an error. </br> $0";break;case n.ERROR_CHART:a="Sorry, the chart sent an error. </br> $0";break;case n.ERROR_DEPENDENCIES:a="The chart dependencies sent an error. </br> $0";break;case n.ERROR_ENDPOINT_FORGOT:a="The endpoint of Sparql service is forgotten (data-sgvizler-endpoint).";break;case n.ERROR_DATA_EMPTY:a="The resquest sent null.";break;case n.ERROR_DATA_NOROW:a="The resquest sent no row."}if(e)for(let t=0,i=e.length;t<i;t++)a=a.replace("$"+t,e[t]);return a}}class b{static getObjectByPath(t,e){let i,r,n=t.split("."),s=e||a;for(i=0,r=n.length;i<r&&void 0!==s;i+=1)if(i<r-1)s=s[n[i]];else try{s=new s[n[i]]}catch(t){s=void 0}return void 0!==s||e||(s=this.getObjectByPath(t,window)),s}static assignProperty(t,e,a){return b.assignJSON(t,b.getJSONByPath(e,a))}static encodeHtml(t){let e=[];for(let a=t.length-1;a>=0;a--)switch(t[a]){case"&":e.unshift("&amp;");break;case'"':e.unshift("&quot;");break;case"'":e.unshift("&apos;");break;case"<":e.unshift("&lt;");break;case">":e.unshift("&gt;");break;default:e.unshift(t[a])}return e.join("")}static decodeHtml(t){let e=t.replace(/&#(\d+);/g,(function(t,e){return String.fromCharCode(e)}));return e=e.replace(/(?:[^\S\r\n]|\u00a0)/g,(function(t,e){return" "})),e}static getJSONByPath(t,e){let a="",i="",r="";if(0===t.length||!e)return a;let n=t.search(/\./);if(-1===n)if(i=t.trim(),Number.isNaN(Number(e))){if(void 0===b.convertToBoolean(e)){let t=JSON.stringify(String(e));t=t.substring(1,t.length-1),a='{"'+i+'":"'+t+'"}'}else a='{"'+i+'":'+e+"}"}else a='{"'+i+'":'+e+"}";else i=t.substring(0,n),r=t.substring(n+1,t.length),a='{"'+i.trim()+'": '+b.getJSONByPath(r,e)+" }";return a}static assignJSON(t,e){return b.mergeInObject(t,JSON.parse(e)),t}static convertToBoolean(t){if(t.length<=5)try{return JSON.parse(t)}catch(t){return}}static assign(t,e,a){b.isPlainObject(a)?(b.isPlainObject(t[e])||(t[e]={}),b.mergeInObject(t[e],a)):t[e]=a}static mergeInObject(t,e){Object.keys(e).forEach(a=>{b.assign(t,a,e[a])})}static isPlainObject(t){return void 0!==t&&void 0!==t.constructor&&t.constructor.prototype===Object.prototype}static sizeConvertInteger(t){var e=t;return"number"!=typeof t&&(e=parseInt(t.replace("px",""),10)),isNaN(e)?null:e}}class f{static done(t){return this._doneCallEvent=t,this}static fireDoneEvent(t){t.loadingIcon.hide(),this._doneCallEvent&&this._doneCallEvent(t.id)}static fail(t){return this._failCallEvent=t,this}static fireFailEvent(t){t.loadingIcon.hide(),this._failCallEvent&&this._failCallEvent(t.id)}static log(t,e){2===t.loglevel&&console.log(this.elapsedTime()+"s: "+e)}static logSimple(t){console.log(this.elapsedTime()+"s: "+t)}static displayFeedback(t,e,a){let i=m.get(e,a);if(2===t.loglevel&&i){let e=document.getElementById(t.id);e&&(e.innerHTML="<p style='color:red'>"+i+"</p>")}f.fireFailEvent(t)}static elapsedTime(){return(Date.now()-this._startTime)/1e3}}f._startTime=Date.now();class w{static get path(){return this._path}static set path(t){this._path=t}}w.VERSION="0.0",w.HOMEPAGE="https://bordercloud.github.io/sgvizler2/index.html",w.DOCPATH="https://bordercloud.github.io/sgvizler2/",w._path="",function(t){t[t.xml=0]="xml",t[t.json=1]="json",t[t.jsonp=2]="jsonp"}(s||(s={}));class v{static getOutputLabel(t){let e="";switch(t){case s.xml:e="xml";break;case s.json:e="json";break;case s.jsonp:e="jsonp"}return e}static getXMLHttpRequestResponseType(t){let e="";switch(t){case s.xml:e="";break;case s.json:case s.jsonp:e="json"}return e}static getHeaderAccept(t){let e="";switch(t){case s.xml:e="application/sparql-results+xml";break;case s.json:case s.jsonp:e="application/sparql-results+json"}return e}static convertString(t){let e=s.json;switch(t){case"xml":e=s.xml;break;case"json":e=s.json;break;case"jsonp":e=s.jsonp}return e}}class _{constructor(){this._query="",this._endpoint="",this._endpointOutputFormat=s.json,this._method="GET",this._queryParameter="query",this.listeners={}}get method(){return this._method}set method(t){this._method=t}get container(){return this._container}set container(t){this._container=t}get query(){return this._query}set query(t){this._query=t}get endpoint(){return this._endpoint}set endpoint(t){this._endpoint=t}get endpointOutputFormat(){return this._endpointOutputFormat}set endpointOutputFormat(t){this._endpointOutputFormat=t}get queryParameter(){return this._queryParameter}set queryParameter(t){this._queryParameter=t}sendRequest(){let t=this;return new Promise((function(e,a){let i,r=new XMLHttpRequest,n=t.endpoint;"get"===t.method.toLowerCase()?n+="?"+t.queryParameter+"="+encodeURIComponent(t.query)+"&output="+v.getOutputLabel(t.endpointOutputFormat):i=t.queryParameter+"="+encodeURIComponent(t.query),r.open(t.method,n,!0),r.setRequestHeader("Accept",v.getHeaderAccept(t.endpointOutputFormat)),r.onprogress=function(t){if(t.lengthComputable){let e=t.loaded/t.total*100;console.log("onprogress"+e)}},r.onload=function(t){r.readyState===XMLHttpRequest.DONE&&(200===r.status?e(JSON.parse(r.response)):a(g.getErrorMessageWithStatus200(r)))},r.onerror=()=>a(g.getErrorWithOtherStatus(r,n)),i?(r.setRequestHeader("content-type","application/x-www-form-urlencoded"),r.send(i)):r.send()}))}}!function(t){t[t.FAILED=0]="FAILED",t[t.LOADED=1]="LOADED",t[t.LOADING=2]="LOADING"}(o||(o={}));class A{constructor(t){this._lang="en",this._chartOptions="",this._chartName="",this._loglevel=0,this._id="";let e=document.getElementById(t);if(null===e)throw new Error("elementID unknown : "+t);let a=A;this._state=o.LOADING;let i=e.attributes;if(i[a.LANG]&&(this._lang=i[a.LANG].value),i[a.LOG_LEVEL_ATTRIBUTE_NAME]&&(this._loglevel=parseInt(i[a.LOG_LEVEL_ATTRIBUTE_NAME].value,10)),i[a.CHART_ATTRIBUTE_NAME])switch(this._chartName=i[a.CHART_ATTRIBUTE_NAME].value,this._chartName){case"google.visualization.AnnotatedTimeLine":case"google.visualization.Gauge":case"google.visualization.ImageSparkLine":case"google.visualization.MotionChart":case"sgvizler.visualization.D3ForceGraph":case'sgvizler.visualization.DefList"':case"sgvizler.visualization.DraculaGraph":case"sgvizler.visualization.List":case"sgvizler.visualization.Text":case"sgvizler.visualization.MapWKT":console.warn("Sgvizler2 : "+this._chartName+" is deprecated. Please choose another chart."),this._chartName="bordercloud.visualization.DataTable";break;case"sgvizler.visualization.Map":console.warn("Sgvizler2 : "+this._chartName+" is obsolete. Please choose leaflet.visualization.Map or another chart."),this._chartName="leaflet.visualization.Map";break;case"google.visualization.GeoMap":console.warn("Sgvizler2 : "+this._chartName+" is obsolete. Please choose google.visualization.Map or another chart."),this._chartName="google.visualization.Map";break;case"google.visualization.PieChart":console.warn("Sgvizler2 : "+this._chartName+" is obsolete. Please choose google.visualization.Pie or another chart."),this._chartName="google.visualization.Pie"}i[a.CHART_OPTION_ATTRIBUTE_NAME]&&(this._chartOptions=b.decodeHtml(i[a.CHART_OPTION_ATTRIBUTE_NAME].value));let r=new _;if(r.container=this,this._id=t,i[a.QUERY_ATTRIBUTE_NAME]&&(r.query=b.decodeHtml(i[a.QUERY_ATTRIBUTE_NAME].value)),!i[a.ENDPOINT_ATTRIBUTE_NAME])return this._state=o.FAILED,void f.displayFeedback(this,n.ERROR_ENDPOINT_FORGOT);r.endpoint=b.decodeHtml(i[a.ENDPOINT_ATTRIBUTE_NAME].value),i[a.OUTPUT_FORMAT_ATTRIBUTE_NAME]&&(r.endpointOutputFormat=v.convertString(i[a.OUTPUT_FORMAT_ATTRIBUTE_NAME].value)),i[a.OUTPUT_METHOD_ATTRIBUTE_NAME]&&(r.method=i[a.OUTPUT_METHOD_ATTRIBUTE_NAME].value),i[a.QUERY_PARAMETER_ATTRIBUTE_NAME]&&(r.queryParameter=i[a.QUERY_PARAMETER_ATTRIBUTE_NAME].value),this._request=r;let s=b.getObjectByPath(this.chartName);if(void 0===s)this._state=o.FAILED,f.displayFeedback(this,n.ERROR_CHART_UNKNOWN,[this.chartName]);else{s.container=this;try{let e=$("#"+t),a=e.css("width"),i=e.css("height");null!==a&&(s.width=a),null!==i&&"0px"!==i&&(s.height=i)}catch(t){}s.optionsRaw=this._chartOptions,this._chart=s}this.saveRefOfContainer()}saveRefOfContainer(){let t=-1,e=A.list.length;for(let a=0;a<e;a++){A.list[a];this.id===A.list[a].id&&(t=a)}-1!=t?A.list[t]=this:A.list.push(this)}static drawWithElementId(t,e){return i(this,void 0,void 0,(function*(){let e=new A(t);e._loadingIcon=new T(e),e.loadingIcon.show(),f.log(e,"drawing id: "+t),yield e.draw()}))}static drawAll(){let t=[],e=[],a=document.evaluate("//div[@"+A.PREFIX+"query]/@id",document,null,XPathResult.ANY_TYPE,null),i=a.iterateNext();for(;i;)e.push(i.value),i=a.iterateNext();for(let a of e)t.push(A.drawWithElementId(a));return Promise.all(t)}static loadDependenciesId(t,e){return i(this,void 0,void 0,(function*(){let e=new A(t);f.log(e,"Load dependencies id: "+t),yield e.loadDependencies()}))}static loadAllDependencies(){let t=[],e=[],a=document.evaluate("//div[@"+A.PREFIX+"query]/@id",document,null,XPathResult.ANY_TYPE,null),i=a.iterateNext();for(;i;)e.push(i.value),i=a.iterateNext();for(let a of e)t.push(A.loadDependenciesId(a));return Promise.all(t)}static create(t,e,a,i,r,n,s,o,l,c){let d=document.getElementById(t);if(null===d)throw new Error("elementID unknown : "+t);let u=A,h=document.createAttribute(u.QUERY_ATTRIBUTE_NAME),g=document.createAttribute(u.ENDPOINT_ATTRIBUTE_NAME),p=document.createAttribute(u.CHART_ATTRIBUTE_NAME);if(h.value=a,g.value=e,p.value=i,d.setAttributeNode(h),d.setAttributeNode(g),d.setAttributeNode(p),r){let t=document.createAttribute(u.CHART_OPTION_ATTRIBUTE_NAME);t.value=r,d.setAttributeNode(t)}if(n){let t=document.createAttribute(u.LOG_LEVEL_ATTRIBUTE_NAME);t.value=n,d.setAttributeNode(t)}if(s){let t=document.createAttribute(u.OUTPUT_FORMAT_ATTRIBUTE_NAME);t.value=s,d.setAttributeNode(t)}if(o){let t=document.createAttribute(u.OUTPUT_METHOD_ATTRIBUTE_NAME);t.value=o,d.setAttributeNode(t)}if(l){let t=document.createAttribute(u.QUERY_PARAMETER_ATTRIBUTE_NAME);t.value=l,d.setAttributeNode(t)}if(c){let t=document.createAttribute(u.LANG);t.value=c,d.setAttributeNode(t)}return d.innerHTML}get id(){return this._id}get lang(){return this._lang}get chartName(){return this._chartName}get loadingIcon(){return this._loadingIcon}get chartOptions(){return this._chartOptions}get chart(){return this._chart}get request(){return this._request}get loglevel(){return this._loglevel}draw(){return i(this,void 0,void 0,(function*(){let t;if(this._state===o.FAILED)return;try{t=yield this.request.sendRequest()}catch(t){console.log(t),f.displayFeedback(this,n.ERROR_REQUEST,[t]),this._state=o.FAILED}if(this._state===o.FAILED)return;let e=t;void 0===e.head&&(console.log(e),f.displayFeedback(this,n.ERROR_CHART,["ERROR_head_undefined"]),this._state=o.FAILED);try{this._chart.loadDependenciesAndDraw(e)}catch(t){console.log(t),f.displayFeedback(this,n.ERROR_CHART,[t]),this._state=o.FAILED}}))}loadDependencies(){return i(this,void 0,void 0,(function*(){try{yield this._chart.loadDependencies()}catch(t){console.log(t),f.displayFeedback(this,n.ERROR_DEPENDENCIES,[t]),this._state=o.FAILED}}))}}A.list=[],A.LANG="lang",A.PREFIX="data-sgvizler-",A.QUERY_ATTRIBUTE_NAME=A.PREFIX+"query",A.ENDPOINT_ATTRIBUTE_NAME=A.PREFIX+"endpoint",A.OUTPUT_FORMAT_ATTRIBUTE_NAME=A.PREFIX+"endpoint-output-format",A.QUERY_PARAMETER_ATTRIBUTE_NAME=A.PREFIX+"endpoint-query-parameter",A.OUTPUT_METHOD_ATTRIBUTE_NAME=A.PREFIX+"endpoint-method",A.CHART_ATTRIBUTE_NAME=A.PREFIX+"chart",A.CHART_OPTION_ATTRIBUTE_NAME=A.PREFIX+"chart-options",A.LOG_LEVEL_ATTRIBUTE_NAME=A.PREFIX+"log";class T{constructor(t){this._rotation=0,this._container=t}show(){let t=this,e=document.getElementById(this._container.id);if(e){e.innerHTML="<canvas class='imageWait' style='position: relative;top: 50%;left: 50%;transform: translate(-50%, -50%);margin:100px auto;'></canvas>";let i=e.getElementsByTagName("canvas")[0],r=b.sizeConvertInteger(this._container.chart.width),n=b.sizeConvertInteger(this._container.chart.height);i.setAttribute("width",r?this._container.chart.width:"100"),i.setAttribute("height",n?this._container.chart.height:"100");var a=new Image;a.onload=function(){t._processusWaiting=setInterval((function(){let e=i.getContext("2d");if(e){let i=e.canvas.width/2,r=e.canvas.height/2,n=65,s=65;e.clearRect(0,0,e.canvas.width,e.canvas.height),e.save(),e.translate(i,r),t._rotation+=2,e.rotate(t._rotation*Math.PI/64),e.drawImage(a,-n/2,-s/2),e.restore()}}),20)},a.src=T._imgWait}}hide(){let t=document.getElementById(this._container.id);if(t){let e=t.getElementsByTagName("canvas")[0];e&&(e.style.display="none")}clearInterval(this._processusWaiting)}}T._imgWait="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABBCAYAAACO98lFAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB9sGDRIEDlVx9CwAAA9ASURBVHja7Vt7dFXVnf6+fW5yc0lCSICQF+j4FkWFaFFSGZlplUDRmemCjuNyqp2po85gRZAQxMXVqiSAxpHWTl0dx+k4dsRHfRWsj+IDSuvioSJWK4MP4JIAIZD3fe1v/rj3hiTcc27AhC7Xmp2VtXLv2edk729/v9e39yFOYFvw8/NyzUgzxTHmTgteSva9LgAEYIWnTVx14c59HzbM2d011OPiiQKgZs2k74OsIXFqarKCRByB4qjPwjYLu2xF9dZffKVBuOGnlVmF4/Q4wDlg30lmailQJK1uajz43ceu/6x7KMZohhqEwnF6lOQc4tgASKwQKUgk54wpKVq34Ofn5X7lmHD7mguqHOOs13EA0J8REAnqvU7bOnnVjB3hrwwTDMx4ajBWikya0vkBFtz21fIJQZhFF1d2AMgZlMEKEIEOa4tXzdi6f7CG6Tuemw7dXnyqMb5zSZXSKFcwEUItiuMLmfbtw5e1NSdBsHgpUiYnewmhiwQWEaLA4QBKQTh0iQzpmmXCLHJpHgMw80/ChI6akmoZPkDyFEgOAAOSkARCACzEuIAPBd2Tv2zvs6l7Z6+GU9hSaQCgpbCbuR0dZnTxiLNgzI0O8H2QxkIyGYAQJCO2RKyddP/MrZ+fMBDaakqnGgcrAH4NSq4aXQYrCSSVSAb2Avb+eFfnfxQ0tB70DqOYT+JmCmNthlBKAVa6sn7GlhdPiGNsqy39oTF8VUoAAAKuAABA8loiJKKUMCt9gdzP22tLr3W75ZF/2hytr95c19raPd5Sa6FEaHRlAwGCM/p///LwYNGgM6F9cUkdYWpSq3t88S01GVLEY9HOznmFDx465HXLopcn3QPwDjc/kXSQH9VN33w2AKwrCZ6c7cPvSRbDAqJ+K+Ffo3vwwjQEu4+bCe21pcsoU9N7dY/P4MjEL0DguqycwHsHa8rGed1SN33LEgn3pJKldEwQcFbqs9+H+0kWQxAMAHKKIf4nqwIfv116Z+VxgdBeM2YCgRp4UPK4MTEc5zfY2Hxb0VivfvXVm++E9EI6JiQYAty8+py85FcVqYTiCL0JQ44zPt+m9WXBK4+dCca8qtQKDnZLRJIyv9+/qWVRycmeXWOcay3a+rMhBUx+IKcIACzwm3QZ1pHp8LkN5XfdNGAQ2haV3ExyDDUAFhzVR50SmiU1WalJwEFAnX1rZRJWIlnsM+a/113mnqvUz9r8haH9katZ+KIBAOiORB5EXBaC0jk9URDVsG508LSMIGy6AVkGvFoD8QOS1NNHj8iqWnF7cVT2QnZFJ3Z3RSfGIvELbcROjktTBbtA0NsSoGRuQWHKRVNK/93TP1RvXSzgcDqziMbYDgDf2HffPhn8ovfq92eOIf1+P9ZljA5ttSWjCfMxiULPyYMk1S7wJ3n3hRYeizVsugFZZxWW3QdH11EYCZJRiytG1IVecdciKheAWNEfhrrpm02SX9gwNnguwW1yC3mCEiDp9im7gitdmUCrkkwAJJIEPR2O85xjBQAALnwE0bz60O3Rzq7TrXgLADjAXV73xOJ4iVBH7xAJKZICAACqdgU/sMDb9KjCIAjCtasr5gXcfYLjTHBdfAACCdlVucv2zi6qD33xpXSGBw8dyq8L/ShqO4pInNlaW3yJW9/mA82fCdjbO0SC3Hp0cRFfmqkclTChzBaM9nCMttTTZogVucsabxnMYDGi7nBLZyw63sCpd+uTVJS29GWCPSoihPaYDQLCGUI0Sc50BUEWXe61gNYcD/0H0opX7G8E47Nba0sv9SicXlFvJoiv9e8zGrAAdmQMasQ33X0CuNPFF9hY1P7LUEoPeffta4rGw5+6rmAMm4xSKhOabVQf9e+zH9tF4UCGqAYC4131hO5wZFtOINsSTIBjJRhSsgtHrGxKO8B1COZkVdhppKkieAak0QIFqygMPgft1ojMq9N2BzOu0KrlB0Nu1zqdtk+HsSBRg0DvLr9qayg9YxCjJwsIQWNcQWiJNR8oU+lmAReBCfuRxa/y6hr7hJQNZcHL6aAa4BUAzgacI0MgQYvfw8HTsTh+YyLdn0Qca18trCn4Zkv9YW8hCtYVoHd2tC+6uDI5kfgPPKYZ8KoLmfAp7a4gnL4K4QPzIn8dCPg3Ahgrq4aVdXsXpK6/XX7XbMfoISuMAuijTRpUTwxGxNr49Nf2mDeDCNrBNJea8ZX5FGCBp+ur39uerk8LCk05OWYARd3nnvLaqIbmPQD6VHlvld1Z5RhnOYUpsIQRhISulNCBBYp6Yc+uw387Bw1DsmMUz8VZJBAJq9Y17Fbk+iCckkkqkrT+mDTG9RXBFSTnEvD3ejh7pHCQApZU7QreO5SO06GulOVPGq7a4upbylUw0y117lPuxOLPDAiEdaODef4cPippNhN075dSSAmfoYeqQkMLwOzV52STLK+r3nyddw7gnXlCEMFQuNv5ZCAg0O/nawAmE1RadAlKerQqFPwBhridnJczNhrDAq8+G8qDfyFiPC3kyobEmNdOOxQ8lBGEDRV3vShiMvvV5UfCJijwvardS/8BQ98IdXfcP2v7Ae8+XOwJQGLo4a6OrgUZ9YTfli9tIDGTaWrzpGcFQMStvocT07Ri5vZGrw5vjQ1eRQd/6e5Vkax9MD1dmO4DwobiJafKmJukjJRaNTUU3OI1sPkvVo66LHh8mzvH0taVByt84C+RjrWpEtoBYfXgpbuDb2QUVZjt+xkBPz0oJWH/QYtFnjF9zcTqLEbibwQRG0oAVmO24yfX9Ew2vRhJWd0/ZU9wXkZ57a2S4HiQl8HNDHrSTj0zKxTsdLt+23PnjgXN+XXf2tYy1CworzjnFRET3FhgAWuhB6r2BD2dag9dHR9udKVUXyY873U9K8f/kOJ2SEPmGsz1F1SMfIXkVPQ33eRnKx2itdd9PXT38wOV3AnhokwsAIBYGOtdzeDlSXMozYhFo01DBcDrI+8oL6gYtYvA1D6KUW8ByOLNaBhjq0J3Px8EzK55CHgJuj4AWD9qYR7IwkwsgNA8bX+wPd2lhc+fmU9wJYgmOv5BT51fLawpGJYbqIV4Kwl/QkIGQPVsDUh6XMJPq0JL1wPA/ltHlQ4LZP8boAsuuoSfHJzc9e2i+pbDaUHo9jvZAavAkY1yV3/wB9dAnZV7GYCxkD63XeHBKJ6Y9P7l2cACEf9M0pc68ZVUe0Sx0UoPh3i4Yc7uI3VLa23+SIfZOwXkMHHOZVw2A/8FtFzp6hMGOK5mD8NalNQhHRPIcd3eC91QNqzskVBnplX3+wPlxnACqYkCDIEfJ8o1tcqyScZ+GrfxD/48dO+u9MPJawCQw5QylkjzZzXPLRo+ctXB1qNAcDr8ceUp5mkNFgAxIt2lBc+eV0xwSnL9hikeDrg9pqAoeiaArV4gJBOawwA+BPDksVKovab4fILXJpM79hZK/cP8lwD49VGOsetQcxctWyGv7XAB0NlpK7xA1rwjIqhGMDsr3z11dSJtC0vPHirH2VZbMhrG96ZSKX5PoksmNB9bnjY6zMCqMBx84bXrlNyaLF4/amF+Guv9Ts8BLdL4yEluz2nsbNwBB0uGrtDgMyQKiIQ0eLSXMT73jFF4yjXz6i1S+nKm9k+PjVBgE2dTQAEErnF7xOmrEAa4o7227OPWhaPOHKzJH543vKh9cenLBC/tYwb9ywixyRWEqt3Bx5UpWSKhLDOrj1PJio2xlD+1V5jcGJnuVTes3RG6m9Qpji/7/bba0h9+WQDaa8ZMcAJ570O8Qm4mndpAstEPPWsHWc1ThoOHFL79Yllw2JGbfIUUsnqn6wDwtcmT7nB7xpynEEdcfwUg25BL2mpL97UtLpvbNr9k/PbZyB5Q3TAbTsei0RPba0t/Rsd5n0A5k+Kwqz0DkYIV+z9JG4t7pLRRC/MZGPYu4/wzOB5FFPRA1a7gfAC4fU3l5YZYQ/ZIzonjNMBOG2m/YPlVH7e5rmBt2ZMk5vR6cjuAZgDvWqtXrNUWY7GzMdx0OMcHM4xFo3z+7AmOeAXI6aQqBA7rOUaQYSddssvzljXWeDLh6weWtzGO+V4AQBAtb3u99I6TEv847mPCCHpFEgDEKSY79xue4ml3+02SmqSUJ2cehHEAryLNjx3H2WiynabSvLLuokBZZ05Ozhc+ml/R8BYSZwAcxl5e21NYlGICVmYspQFgSij4nJWu8XSSBgg4Wd9L/GniQnobEvifXiAUNLQe7O6OVEJoPhLPk6ffiJ4TCV/2vIxICnw2f1njgQGBAABf3x18QlbzRYWPAuNIwXJaMvB3gUdvmgiSAfIXra38tdcARzU077GMzRJxqLcDGzRZSgCFMLsitwLpF9U1va3aE3xAMVwKYVtPxFDyJ7HFnTxbbFoARdLEa8Ypgbi8Zs0kz43c4cv2bbSKTAbwvz0nZAcFAImSYvH4ZbkPHtibUVRJy4i9wU1Tdi89z1pcJ2inqDZL2yHZUES4BwA6aRsBhtOdKTKp9xUM6xeuraz1BuLAHw8fwHmA3ukj6h43AgDBGGD/sWB50+8yVmoD1vNKgidnmZj/tZDvk97bbDUvT/ojwdNd/Ggq/SCsXgq3h7/bMGf7Qc+4v7js7wSsMsCxn1Dt2URGMxj/Tt59Ta8PqFz9sm3R2klBgUu9Xu+xvU6nCvamfXtbHnvs+s/CbnaaqANK74Uw1xC5Ak3yQGgmG4hL2NDZGptZ/PD+9gHX7F+2LXz+zHzjz2vNzNDEUf0kTE2S1hnLjaI+iMftLphom8KOXfk37+9L3XNoUUGhg5zLaZzplKYBPOmoUSdywU9l8cu49GTB8sZ3jlm4GBw2VD4B4uqBm2wvM0kmWLZ3OBSeiu2PXr/y79/v6H3fphuQddqI0vMdg5No6Fdcu9tauCmTRnFCQLhtzfkTs+n8TkQWMUgnYaUdHWqtXDVjRyuGsA3aO1APzHhvq4Bn3U6fHrtzl0Celsu8IgxxG9QXweqrt1xtpY2DBQSklg6x4ysFAgCwjdWw+kOmFzcysYAgLdkwmC98DblPSBM2Hwd5Te9JDSTFSx4XDAu8a3n15mU4AW1IXwlc9NKkShg+QeKMxIsa6cFIfU8BlniHscjVdd/athMnqJ2QF8Zr1kysFnmjEU6HYTGs8kBkAYiBbBO0D8JHhH2orvrdN3CCG0/kP7t59Tl52cNz8n2RaE5cPsdhLG7khNvDkdaH52xvx/+3P137P1CQBU4FOFvrAAAAAElFTkSuQmCC";class R{constructor(t){this.spatialReferenceSystem=null!=t?t:"http://www.wikidata.org/entity/Q42274"}static create(t){try{const e=/^(?:\s*<([^>]+)>\s+)?Point\s*\(([^\s]+) +([^\s]+)\)$/i,a=t.match(e);if(null!=a)return new C(a[2],a[3],a[1]);const i=/^(?:\s*<([^>]+)>\s+)?Linestring\s*\((.+)\)$/i,r=/([^\s,]+?)\s+([^\s,]+)/g,n=t.match(i);if(null!=n){let t=n[2].matchAll(r);const e=new O(n[1]);for(const a of t)e.push(new C(a[1],a[2],n[1]));return e}const s=/^(?:\s*<([^>]+)>\s+)?Envelope\s*\(\s*([^\s,]+)\s*,\s*([^\s]+)\s*,\s*([^\s]+)\s*,\s*([^\s]+)\s*\)$/i,o=t.match(s);if(null!=o)return new E(o[2],o[3],o[4],o[5],o[1]);const l=/^(?:\s*<([^>]+)>\s+)?Polygon\s*\(\(([^\(\)]+)\)\)$/i,c=t.match(l);if(null!=c){let t=c[2].matchAll(r);const e=new y(c[1]);for(const a of t)e.push(new C(a[1],a[2],c[1]));return e}const d=/^(?:\s*<([^>]+)>\s+)?(?:MULTI)?POLYGON\s*\((.+)\)$/i,u=/\(\(?(.+?)\)\)?/g,h=t.match(d);if(null!=h){let t=h[2].matchAll(u);const e=new S(h[1]);for(const a of t){let t=a[1].matchAll(r),i=new y(h[1]);for(const e of t)i.push(new C(e[1],e[2],h[1]));e.push(i)}return e}}catch(e){throw e instanceof N?new N("Parsing error. "+e.message+": "+t):e}throw new N("Parsing error. Unknown syntax: "+t)}static getNumber(t,e){if("number"==typeof t)return t;{const a=parseFloat(t);if(isNaN(a))throw new N("Value "+t+" of "+e+" is not a number");return a}}}class C extends R{constructor(t,e,a){super(a),this.long=R.getNumber(t,"Point:longitude"),this.lat=R.getNumber(e,"Point:latitude")}equals(t){if(t instanceof C){const e=t;if(e.long===this.long&&e.lat===this.lat)return!0}return!1}}class O extends R{constructor(){super(...arguments),this.points=[]}push(t){this.points.push(t)}}class E extends R{constructor(t,e,a,i,r){super(r),this.minLong=R.getNumber(t,"Envelope:minLong"),this.maxLong=R.getNumber(e,"Envelope:maxLong"),this.maxLat=R.getNumber(a,"Envelope:maxLat"),this.minLat=R.getNumber(i,"Envelope:minLat")}}class y extends R{constructor(){super(...arguments),this.points=[]}push(t){this.points.push(t)}}class S extends R{constructor(){super(...arguments),this.polygons=[]}push(t){this.polygons.push(t)}}class N extends Error{}const I=l;var z,x=Object.freeze({__proto__:null,visualization:I,Loader:c,Dependency:d,ScriptDependency:u,CssDependency:h,SparqlError:g,Select:p,get MESSAGES(){return n},Messages:m,Tools:b,Logger:f,Core:w,get CHART_PATTERN_OPTIONS(){return e},Chart:r,get SPARQL_RESULT(){return s},SparqlTools:v,Request:_,get CONTAINER_STATE(){return o},Container:A,LoadingIcon:T,WktLiteral:R,PointWktLiteral:C,LinestringWktLiteral:O,EnvelopeWktLiteral:E,PolygonWktLiteral:y,MultiPolygonWktLiteral:S,ErrorWktLiteral:N});!function(t){t[t.TAG=0]="TAG",t[t.STYLE=1]="STYLE"}(z||(z={}));class P extends r{constructor(){super(),this.addCss(w.path+"lib/DataTables/DataTables-1.10.21/css/dataTables.bootstrap4.min.css"),this.addCss(w.path+"lib/DataTables/Responsive-2.2.5/css/responsive.bootstrap4.min.css"),this.addCss(w.path+"lib/DataTables/Buttons-1.6.2/css/buttons.bootstrap4.min.css");let t=this.addScript(w.path+"lib/DataTables/DataTables-1.10.21/js/jquery.dataTables.min.js"),e=this.addScript(w.path+"lib/DataTables/DataTables-1.10.21/js/dataTables.bootstrap4.min.js",t),a=this.addScript(w.path+"lib/DataTables/Responsive-2.2.5/js/dataTables.responsive.js",e);this.addScript(w.path+"lib/DataTables/Responsive-2.2.5/js/responsive.bootstrap4.js",a);let i=this.addScript(w.path+"lib/DataTables/Buttons-1.6.2/js/dataTables.buttons.min.js",e),r=this.addScript(w.path+"lib/DataTables/Buttons-1.6.2/js/buttons.bootstrap4.min.js",i),n=this.addScript(w.path+"lib/DataTables/Buttons-1.6.2/js/buttons.flash.min.js",r);this.addScript(w.path+"lib/DataTables/JSZip-2.5.0/jszip.min.js",n);let s=this.addScript(w.path+"lib/DataTables/pdfmake-0.1.36/pdfmake.min.js",n);this.addScript(w.path+"lib/DataTables/pdfmake-0.1.36/vfs_fonts.js",s),this.addScript(w.path+"lib/DataTables/Buttons-1.6.2/js/buttons.html5.min.js",n),this.addScript(w.path+"lib/DataTables/Buttons-1.6.2/js/buttons.print.min.js",n)}static buildColumnDefs(t,e){let a,i,r,n,s=/ *col([0-9]+)\_([a-zA-Z]+)\_([^=;\n]*) */gi,o=[],l=[];for(let t=0;t<e;t++)l[t]=[],l[t][z.TAG]="",l[t][z.STYLE]="";for(;null!==(a=s.exec(t));)a.index===s.lastIndex&&s.lastIndex++,r=parseInt(a[1],10),l[r][z.TAG]=a[2],l[r][z.STYLE]+=a[3]+";";for(let t=0;t<e;t++){switch(n=!0,l[t][z.TAG]){case"img":i=this.getFunctionColumnDefImg(l[t][z.STYLE]);break;case"span":i=this.getFunctionColumnDefSpan(l[t][z.STYLE]);break;case"video":i=this.getFunctionColumnDefVideo(l[t][z.STYLE]);break;default:n=!1,i=this.getFunctionColumnDefDefault()}o[t]={targets:t,render:i,isModified:n}}return o}static getFunctionColumnDefDefault(){return function(t,e,a,i){return t}}static getFunctionColumnDefImg(t){return function(e,a,i,r){return'<img src="'+e+'"  style="'+t+'">'}}static getFunctionColumnDefVideo(t){return function(e,a,i,r){let n=new RegExp("youtu"),s=new RegExp("facebook"),o=new RegExp("commons.wikimedia.org");if(n.test(e)){let a=e.replace("watch?v=","embed/");return'<iframe  style="'+t+'" src="'+a+'" meta http-equiv="X-Frame-Options" content="allow" frameborder="0" allowfullscreen></iframe>'}return s.test(e)?'<iframe src="https://www.facebook.com/plugins/video.php?href='+encodeURIComponent(e)+'&show_text=0&width=560" style="border:none;overflow:hidden;'+t+'" scrolling="no" frameborder="0" allowTransparency="true" allowFullScreen="true"></iframe>':o.test(e)?'<video controls style="'+t+'"><source src="'+e+'"></video>':'<iframe  style="'+t+'" src="'+e+'" meta http-equiv="X-Frame-Options" content="allow" frameborder="0" allowfullscreen></iframe>'}}static getFunctionColumnDefSpan(t){return function(e,a,i,r){return'<span style="'+t+'">'+e+"</span>"}}get icon(){return"fa fa-table"}get label(){return"DataTable"}get subtext(){return"DataTable"}get classFullName(){return"bordercloud.visualization.DataTable"}get tutorialFilename(){return"tutorial-bordercloud_visualization_DataTable.html"}draw(t){let e=this;return new Promise((function(a,i){let r=document.getElementById(e.container.id);if(!r)return f.displayFeedback(e.container,n.ERROR_CHART_UNKNOWN,[e.container.id]),a();try{const a={hour:"numeric",minute:"numeric",second:"numeric"};let i,n,s,o=e.container.lang,l=t.head.vars,c=t.results.bindings,d=l.length,u=c.length,h=e.container.id+"-datatable",g=[],p=[],m=document.createElement("table"),b=document.createAttribute("id"),f=document.createAttribute("class"),w=document.createAttribute("cellspacing"),v=document.createAttribute("width"),_=Object.assign({class:"table table-striped table-bordered",cellspacing:"0",width:"100%",colstyle:void 0},e.options);for(let t=0;t<d;t++)g[t]={title:l[t].replace("_"," ")};void 0!==_.colstyle&&(s=P.buildColumnDefs(_.colstyle,d));for(let t=0;t<u;t++){i=c[t],n=[];for(let t=0;t<d;t+=1)if(void 0!==i[l[t]])if(void 0!==s&&s[t].isModified)n[t]=i[l[t]].value;else if("uri"===i[l[t]].type)n[t]='<a href="'+i[l[t]].value+'" target="_blank">'+i[l[t]].value+"</a>";else switch(i[l[t]].datatype){case"http://www.w3.org/2001/XMLSchema#dateTime":n[t]=new Date(i[l[t]].value).toLocaleDateString(o,a);break;case"http://www.w3.org/2001/XMLSchema#date":n[t]=new Date(i[l[t]].value).toLocaleDateString(o);break;default:n[t]=i[l[t]].value}else n[t]="";p[t]=n}b.value=h,f.value=_.class,w.value=_.cellspacing,v.value=_.width,m.setAttributeNode(b),m.setAttributeNode(f),m.setAttributeNode(w),m.setAttributeNode(v),r.appendChild(m),$.fn.dataTable.Buttons.defaults.dom.button.className="btn btn-outline-dark btn-sm",$("#"+h).DataTable({bSort:!1,data:p,columns:g,columnDefs:s,dom:"<'row'<'col'B><'col-auto'l><'col-sm-6'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",buttons:[{extend:"csv",text:'<i class="fas fa-lg fa-file-csv align-text-bottom"></i>',titleAttr:"CSV"},{extend:"pdf",text:'<i class="fas fa-lg fa-file-pdf align-text-bottom"></i>',titleAttr:"PDF"},{extend:"print",text:'<i class="fas fa-lg fa-print align-text-bottom"></i>',titleAttr:"print"}],language:P.geti18n(o)})}catch(t){return i(t)}return a()}))}static geti18n(t){switch(t){case"fr":return{sProcessing:"Traitement en cours...",sSearch:"Rechercher&nbsp;:",sLengthMenu:"Afficher _MENU_ &eacute;l&eacute;ments",sInfo:"Affichage de l'&eacute;l&eacute;ment _START_ &agrave; _END_ sur _TOTAL_ &eacute;l&eacute;ments",sInfoEmpty:"Affichage de l'&eacute;l&eacute;ment 0 &agrave; 0 sur 0 &eacute;l&eacute;ment",sInfoFiltered:"(filtr&eacute; de _MAX_ &eacute;l&eacute;ments au total)",sInfoPostFix:"",sLoadingRecords:"Chargement en cours...",sZeroRecords:"Aucun &eacute;l&eacute;ment &agrave; afficher",sEmptyTable:"Aucune donn&eacute;e disponible dans le tableau",oPaginate:{sFirst:"Premier",sPrevious:"Pr&eacute;c&eacute;dent",sNext:"Suivant",sLast:"Dernier"},oAria:{sSortAscending:": activer pour trier la colonne par ordre croissant",sSortDescending:": activer pour trier la colonne par ordre d&eacute;croissant"}};default:return{sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sInfoThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sZeroRecords:"No matching records found",oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"}}}}}class D extends r{constructor(){super(),this.addCss(w.path+"lib/pivottable/dist/pivot.min.css"),this.addCss(w.path+"lib/jquery-ui/jquery-ui.min.css"),this.addCss(w.path+"lib/c3/c3.min.css");let t=this.addScript(w.path+"lib/jquery-ui/jquery-ui.min.js"),e=this.addScript(w.path+"lib/jquery-ui.touch-punch/jquery.ui.touch-punch.min.js",t),a=this.addScript(w.path+"lib/pivottable/dist/pivot.min.js",e),i=this.addScript(w.path+"lib/plotly/plotly-latest.min.js",a);this.addScript(w.path+"lib/pivottable/dist/plotly_renderers.js",i);let r=this.addScript(w.path+"lib/d3/d3.min.js",a),n=this.addScript(w.path+"lib/c3/c3.min.js",r);this.addScript(w.path+"lib/pivottable/dist/d3_renderers.js",r),this.addScript(w.path+"lib/pivottable/dist/c3_renderers.js",n),this.addScript(w.path+"lib/pivottable/dist/export_renderers.js",a);let s=this.addScript("https://www.gstatic.com/charts/loader.js",a);this.addScript(w.path+"lib/pivottable/dist/gchart_renderers.js",s),this.addScript(w.path+"lib/pivottable/dist/pivot.fr.min.js",a)}static init(){google.load("visualization","1",{packages:["corechart","charteditor"]}),D._isInit=!0}get icon(){return"fa fa-table"}get label(){return"PivotTable"}get subtext(){return"PivotTable"}get classFullName(){return"bordercloud.visualization.PivotTable"}get tutorialFilename(){return"tutorial-bordercloud_visualization_PivotTable.html"}draw(t){let e=this;return new Promise((function(a,i){try{let i=document.getElementById(e.container.id);if(!i)return f.displayFeedback(e.container,n.ERROR_CHART_UNKNOWN,[e.container.id]),a();let r,s,o=e.container.lang,l=t.head.vars,c=t.results.bindings,d=l.length,u=c.length,h=e.container.id,g=e.container.id+"-pivot",p=[],m=e.container.id+"-showUI",w=document.createElement("div"),v=document.createAttribute("id"),_={renderers:$.extend($.pivotUtilities.renderers,$.pivotUtilities.plotly_renderers,$.pivotUtilities.d3_renderers,$.pivotUtilities.c3_renderers,$.pivotUtilities.gchart_renderers,$.pivotUtilities.export_renderers),rendererOptions:{width:b.sizeConvertInteger(e.width),height:b.sizeConvertInteger(e.height)}},A=null;v.value=g,w.setAttributeNode(v),i.appendChild(w);for(let t=0;t<u;t++){r=c[t],s={};for(let t=0;t<d;t+=1)s[l[t]]=void 0!==r[l[t]]?r[l[t]].value:null;p[t]=s}try{A=JSON.parse(e.optionsRaw)}catch(t){A={}}let T=Object.assign(A,_);$("#"+g).pivotUI(p,T,!0,o);let R=!0===T.showUI||void 0===T.showUI?"checked":"";$("#"+h).prepend('<div class="custom-control custom-switch float-right"style=\'z-index: 2; right: 0;\'>\n  <input type="checkbox" class="custom-control-input" id="'+m+'" '+R+'>\n  <label class="custom-control-label" for="'+m+'"> </label>\n</div>'),$("#"+m).on("change",(function(){let t=$("#"+g).data("pivotUIOptions");t.showUI=this.checked,$("#"+g).pivotUI(p,t,!0,o)}))}catch(t){return i(t)}return a()}))}get newOptionsRaw(){let t=this.container.id+"-pivot";var e=$("#"+t).data("pivotUIOptions");return JSON.stringify(e,["rowOrder","rows","cols","aggregatorName","vals","rendererName","showUI"])}}D._isInit=!1;const k=Object.freeze({__proto__:null,DataTable:P,PivotTable:D});var F=Object.freeze({__proto__:null,visualization:k});class j{static decodeFormatSize(t){let e=t;if(Number.isNaN(Number(t))){let t=/%/gi,a=/px/gi;e.search(a)>=0?(e=e.replace("px",""),Number.isNaN(Number(e))||(e=Number(e))):e.search(t)}return e}}class B{constructor(t,e=!1){e?this.convertResultRaw(t):this.convertResult(t)}setRole(t,e){this._dataTable.setColumnProperty(t,"role",e)}getDataTable(){return this._dataTable}convertResult(t){let e=new google.visualization.DataTable,a=t.head.vars,i=t.results.bindings,r=a.length,n=i.length;for(let t of a){let a=t.replace("_"," ");if(n>0){let r=void 0!==i[0][t]?i[0][t].datatype:"";"http://www.w3.org/2001/XMLSchema#decimal"===r||"http://www.w3.org/2001/XMLSchema#integer"===r?e.addColumn("number",a):"http://www.w3.org/2001/XMLSchema#boolean"===r?e.addColumn("boolean",a):"http://www.w3.org/2001/XMLSchema#date"===r?e.addColumn("date",a):"http://www.w3.org/2001/XMLSchema#dateTime"===r?e.addColumn("datetime",a):"http://www.w3.org/2001/XMLSchema#time"===r?e.addColumn("timeofday",a):e.addColumn("string",a)}else e.addColumn("string",a)}if(n>0){e.addRows(n);for(let t=0;t<n;t++)for(let n=0;n<r;n++){let r=void 0!==i[t][a[n]]&&i[t][a[n]].hasOwnProperty("datatype")?i[t][a[n]].datatype:"";if("http://www.w3.org/2001/XMLSchema#integer"===r)e.setCell(t,n,parseInt(i[t][a[n]].value,10));else if("http://www.w3.org/2001/XMLSchema#decimal"===r||"http://www.w3.org/2001/XMLSchema#float"===r)e.setCell(t,n,parseFloat(i[t][a[n]].value));else if("http://www.w3.org/2001/XMLSchema#boolean"===r)e.setCell(t,n,"true"===i[t][a[n]].value);else if("http://www.w3.org/2001/XMLSchema#date"===r)e.setCell(t,n,new Date(i[t][a[n]].value));else if("http://www.w3.org/2001/XMLSchema#dateTime"===r)e.setCell(t,n,new Date(i[t][a[n]].value));else if("http://www.w3.org/2001/XMLSchema#time"===r){let r=new Date(i[t][a[n]].value);e.setCell(t,n,[r.getHours(),r.getHours(),r.getSeconds(),r.getMilliseconds()])}else void 0===i[t][a[n]]?e.setCell(t,n,null):e.setCell(t,n,i[t][a[n]].value)}}this._dataTable=e}convertResultRaw(t){let e=new google.visualization.DataTable,a=t.head.vars,i=t.results.bindings,r=a.length,n=i.length;for(let t of a)e.addColumn("string",t);if(n>0){e.addRows(n);for(let t=0;t<n;t++)for(let n=0;n<r;n++)void 0===i[t][a[n]]?e.setCell(t,n,""):e.setCell(t,n,i[t][a[n]].value.toString())}this._dataTable=e}}class M extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["annotationchart"]}),M._isInit=!0}get icon(){return"fas fa-chart-line"}get label(){return"AnnotationChart"}get subtext(){return"AnnotationChart"}get classFullName(){return"google.visualization.AnnotationChart"}get tutorialFilename(){return"tutorial-google_visualization_AnnotationChart.html"}draw(t){let e=this;return new Promise((function(a,i){let r=500;""!==e.height&&(r=j.decodeFormatSize(e.height));let s=Object.assign({},e.options);return s=Object.assign(s,{width:j.decodeFormatSize(e.width),height:r}),M._isInit||M.init(),google.charts.setOnLoadCallback(()=>{try{let a=new B(t);new google.visualization.AnnotationChart(document.getElementById(e.container.id)).draw(a.getDataTable(),s)}catch(t){console.log(t),f.displayFeedback(e.container,n.ERROR_CHART,[t]),f.log(e.container,"Chart finished with error : "+e.container.id)}}),a()}))}}M._isInit=!1;class H extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["corechart"]}),H._isInit=!0}get icon(){return"fas fa-chart-area"}get label(){return"AreaChart"}get subtext(){return"AreaChart"}get classFullName(){return"google.visualization.AreaChart"}get tutorialFilename(){return"tutorial-google_visualization_AreaChart.html"}draw(t){let e=this;return new Promise((function(a,i){let r=500;""!==e.height&&(r=j.decodeFormatSize(e.height));let s=Object.assign({},e.options);return s=Object.assign(s,{width:j.decodeFormatSize(e.width),height:r}),H._isInit||H.init(),google.charts.setOnLoadCallback(()=>{try{let a=new B(t);new google.visualization.AreaChart(document.getElementById(e.container.id)).draw(a.getDataTable(),s)}catch(t){console.log(t),f.displayFeedback(e.container,n.ERROR_CHART,[t]),f.log(e.container,"Chart finished with error : "+e.container.id)}}),a()}))}}H._isInit=!1;class U extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["corechart","bar"]}),U._isInit=!0}get icon(){return"fa fa-align-left"}get label(){return"BarChart"}get subtext(){return"BarChart"}get classFullName(){return"google.visualization.BarChart"}get tutorialFilename(){return"tutorial-google_visualization_BarChart.html"}draw(t){let e=this;return new Promise((function(a,i){let r=500;""!==e.height&&(r=j.decodeFormatSize(e.height));let s=Object.assign({},e.options);return s=Object.assign(s,{width:j.decodeFormatSize(e.width),height:r}),U._isInit||U.init(),google.charts.setOnLoadCallback(()=>{try{let a=new B(t);new google.visualization.BarChart(document.getElementById(e.container.id)).draw(a.getDataTable(),s)}catch(t){console.log(t),f.displayFeedback(e.container,n.ERROR_CHART,[t]),f.log(e.container,"Chart finished with error : "+e.container.id)}}),a()}))}}U._isInit=!1;class q extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["corechart"]}),q._isInit=!0}get icon(){return"fa fa-circle"}get label(){return"BubbleChart"}get subtext(){return"BubbleChart"}get classFullName(){return"google.visualization.BubbleChart"}get tutorialFilename(){return"tutorial-google_visualization_BubbleChart.html"}draw(t){let e=this;return new Promise((function(a,i){let r=500;""!==e.height&&(r=j.decodeFormatSize(e.height));let s=Object.assign({},e.options);return s=Object.assign(s,{width:j.decodeFormatSize(e.width),height:r}),q._isInit||q.init(),google.charts.setOnLoadCallback(()=>{try{let a=new B(t);new google.visualization.BubbleChart(document.getElementById(e.container.id)).draw(a.getDataTable(),s)}catch(t){console.log(t),f.displayFeedback(e.container,n.ERROR_CHART,[t]),f.log(e.container,"Chart finished with error : "+e.container.id)}}),a()}))}}q._isInit=!1;class W extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["calendar"]}),W._isInit=!0}get icon(){return"fa fa-calendar"}get label(){return"Calendar"}get subtext(){return"Calendar"}get classFullName(){return"google.visualization.Calendar"}get tutorialFilename(){return"tutorial-google_visualization_Calendar.html"}draw(t){let e=this;return new Promise((function(a,i){let r=500;""!==e.height&&(r=j.decodeFormatSize(e.height));let s=Object.assign({},e.options);return s=Object.assign(s,{width:j.decodeFormatSize(e.width),height:r}),W._isInit||W.init(),google.charts.setOnLoadCallback(()=>{try{let a=new B(t);new google.visualization.Calendar(document.getElementById(e.container.id)).draw(a.getDataTable(),s)}catch(t){console.log(t),f.displayFeedback(e.container,n.ERROR_CHART,[t]),f.log(e.container,"Chart finished with error : "+e.container.id)}}),a()}))}}W._isInit=!1;class G extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["corechart"]}),G._isInit=!0}get icon(){return"fas fa-chart-line"}get label(){return"CandlestickChart"}get subtext(){return"CandlestickChart"}get classFullName(){return"google.visualization.CandlestickChart"}get tutorialFilename(){return"tutorial-google_visualization_CandlestickChart.html"}draw(t){let e=this;return new Promise((function(a,i){if(0===t.results.bindings.length)return i(m.get(n.ERROR_DATA_NOROW));let r=500;""!==e.height&&(r=j.decodeFormatSize(e.height));let s=Object.assign({},e.options);return s=Object.assign(s,{width:j.decodeFormatSize(e.width),height:r}),G._isInit||G.init(),google.charts.setOnLoadCallback(()=>{try{let a=new B(t);new google.visualization.CandlestickChart(document.getElementById(e.container.id)).draw(a.getDataTable(),s)}catch(t){console.log(t),f.displayFeedback(e.container,n.ERROR_CHART,[t]),f.log(e.container,"Chart finished with error : "+e.container.id)}}),a()}))}}G._isInit=!1;class X extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["corechart","bar"]}),X._isInit=!0}get icon(){return"fas fa-chart-bar"}get label(){return"ColumnChart"}get subtext(){return"ColumnChart"}get classFullName(){return"google.visualization.ColumnChart"}get tutorialFilename(){return"tutorial-google_visualization_ColumnChart.html"}draw(t){let e=this;return new Promise((function(a,i){let r=500;""!==e.height&&(r=j.decodeFormatSize(e.height));let s=Object.assign({reverseCategories:!1},e.options);return s=Object.assign(s,{width:j.decodeFormatSize(e.width),height:r}),X._isInit||X.init(),google.charts.setOnLoadCallback(()=>{try{let a=new B(t);new google.visualization.ColumnChart(document.getElementById(e.container.id)).draw(a.getDataTable(),s)}catch(t){console.log(t),f.displayFeedback(e.container,n.ERROR_CHART,[t]),f.log(e.container,"Chart finished with error : "+e.container.id)}}),a()}))}}X._isInit=!1;class Y extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["corechart"]}),Y._isInit=!0}get icon(){return"fa fa-signal"}get label(){return"ComboChart"}get subtext(){return"ComboChart"}get classFullName(){return"google.visualization.ComboChart"}get tutorialFilename(){return"tutorial-google_visualization_ComboChart.html"}draw(t){let e=this;return new Promise((function(a,i){let r=500;""!==e.height&&(r=j.decodeFormatSize(e.height));let s=Object.assign({},e.options);return s=Object.assign(s,{width:j.decodeFormatSize(e.width),height:r}),Y._isInit||Y.init(),google.charts.setOnLoadCallback(()=>{try{let a=new B(t);new google.visualization.ComboChart(document.getElementById(e.container.id)).draw(a.getDataTable(),s)}catch(t){console.log(t),f.displayFeedback(e.container,n.ERROR_CHART,[t]),f.log(e.container,"Chart finished with error : "+e.container.id)}}),a()}))}}Y._isInit=!1;class Q{static get key(){return this._key}static set key(t){this._key=t}}Q._key="";class K extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["geochart"],mapsApiKey:Q.key}),K._isInit=!0}get icon(){return"fa fa-globe"}get label(){return"GeoChart"}get subtext(){return"GeoChart"}get classFullName(){return"google.visualization.GeoChart"}get tutorialFilename(){return"tutorial-google_visualization_GeoChart.html"}draw(t){let e=this;return new Promise((function(a,i){let r=500;""!==e.height&&(r=j.decodeFormatSize(e.height));let s=Object.assign({},e.options);return s=Object.assign(s,{width:j.decodeFormatSize(e.width),height:r}),K._isInit||K.init(),google.charts.setOnLoadCallback(()=>{try{let a=new B(t);new google.visualization.GeoChart(document.getElementById(e.container.id)).draw(a.getDataTable(),s)}catch(t){console.log(t),f.displayFeedback(e.container,n.ERROR_CHART,[t]),f.log(e.container,"Chart finished with error : "+e.container.id)}}),a()}))}}K._isInit=!1;class V extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["corechart"]}),V._isInit=!0}get icon(){return"fas fa-chart-area"}get label(){return"Histogram"}get subtext(){return"Histogram"}get classFullName(){return"google.visualization.Histogram"}get tutorialFilename(){return"tutorial-google_visualization_Histogram.html"}draw(t){let e=this;return new Promise((function(a,i){let r=500;""!==e.height&&(r=j.decodeFormatSize(e.height));let s=Object.assign({},e.options);return s=Object.assign(s,{width:j.decodeFormatSize(e.width),height:r}),V._isInit||V.init(),google.charts.setOnLoadCallback(()=>{try{let a=new B(t);new google.visualization.Histogram(document.getElementById(e.container.id)).draw(a.getDataTable(),s)}catch(t){console.log(t),f.displayFeedback(e.container,n.ERROR_CHART,[t]),f.log(e.container,"Chart finished with error : "+e.container.id)}}),a()}))}}V._isInit=!1;class J extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["corechart","line"]}),J._isInit=!0}get icon(){return"fas fa-chart-line"}get label(){return"Interval"}get subtext(){return"Interval"}get classFullName(){return"google.visualization.IntervalChart"}get tutorialFilename(){return"tutorial-google_visualization_IntervalChart.html"}draw(t){let e=this;return new Promise((function(a,i){let r=500;""!==e.height&&(r=j.decodeFormatSize(e.height));let s=Object.assign({},e.options);return s=Object.assign(s,{width:j.decodeFormatSize(e.width),height:r}),J._isInit||J.init(),google.charts.setOnLoadCallback(()=>{try{let a=new B(t),i=t.head.vars.length;for(let t=2;t<i;t++)a.setRole(t,"interval");new google.visualization.LineChart(document.getElementById(e.container.id)).draw(a.getDataTable(),s)}catch(t){console.log(t),f.displayFeedback(e.container,n.ERROR_CHART,[t]),f.log(e.container,"Chart finished with error : "+e.container.id)}}),a()}))}}J._isInit=!1;class Z extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["corechart","line"]}),Z._isInit=!0}get icon(){return"fas fa-chart-line"}get label(){return"Line"}get subtext(){return"Line"}get classFullName(){return"google.visualization.LineChart"}get tutorialFilename(){return"tutorial-google_visualization_LineChart.html"}draw(t){let e=this;return new Promise((function(a,i){let r="500";""!==e.height&&(r=j.decodeFormatSize(e.height));let s=Object.assign({},e.options);return s=Object.assign(s,{width:j.decodeFormatSize(e.width),height:r}),Z._isInit||Z.init(),google.charts.setOnLoadCallback(()=>{try{let a=new B(t);new google.visualization.LineChart(document.getElementById(e.container.id)).draw(a.getDataTable(),s)}catch(t){console.log(t),f.displayFeedback(e.container,n.ERROR_CHART,[t]),f.log(e.container,"Chart finished with error : "+e.container.id)}}),a()}))}}Z._isInit=!1;class tt extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["map"],mapsApiKey:Q.key}),tt._isInit=!0}get icon(){return"fa fa-map"}get label(){return"Map"}get subtext(){return"Map"}get classFullName(){return"google.visualization.Map"}get tutorialFilename(){return"tutorial-google_visualization_Map.html"}draw(t){let e=this;return new Promise((function(a,i){let r=500;""!==e.height&&(r=j.decodeFormatSize(e.height));let s=Object.assign({showTooltip:!1,showInfoWindow:!0,enableScrollWheel:!0},e.options);return s=Object.assign(s,{width:j.decodeFormatSize(e.width),height:r}),location.origin.startsWith("file:")&&(s=Object.assign({icons:{default:{normal:"https://maps.google.com/mapfiles/ms/micons/red-dot.png",selected:"https://maps.google.com/mapfiles/ms/micons/blue-dot.png"}}},s)),tt._isInit||tt.init(),google.charts.setOnLoadCallback(()=>{try{let a,r,n,o="",l=t.head.vars,c=t.results.bindings,d=l.length,u=c.length,h=new google.visualization.DataTable;if(d<=2)o="Parameters : latitude(xsd:Decimal) longitude(xsd:Decimal) title(xsd:string optional) introduction(xsd:string optional) link(IRI optional)";else{let t=0,e=1,i=2;h.addColumn("number",t),h.addColumn("number",e),d>2&&h.addColumn("string",i),h.addRows(u);for(let s=0;s<u;s++){if(a=parseFloat(c[s][l[t]].value),r=parseFloat(c[s][l[e]].value),n="",isNaN(a)||isNaN(r)){o="Latitude or longitude is not a decimal. Parameters of chart : latitude(xsd:Decimal) longitude(xsd:Decimal) title(xsd:string optional) introduction(xsd:string optional) link(IRI optional). ";break}if(d>=6){let o=void 0!==c[s][l[2]]?c[s][l[2]].value:"",d=void 0!==c[s][l[3]]?"<p style='margin: 0px'>"+c[s][l[3]].value+"</p>":"",u=void 0!==c[s][l[4]]?"<a style='font-size: large;font-style: medium;' href='"+c[s][l[4]].value+"' target='_blank'>"+o+"</a>":o,g=void 0!==c[s][l[5]]?"<img src='"+c[s][l[5]].value+"' style='margin-left:5px;margin-bottom:5px;width:150px;float:right;'/>":"";n=void 0===c[s][l[3]]||0===c[s][l[3]].value.length?'<div style="display: flow-root;min-width: 150px;min-height:150px;">'+u+"<div>"+g+"</div></div>":'<div style="display: flow-root;width: 350px;min-height:150px;">'+u+"<div>"+g+d+"</div></div>",h.setCell(s,t,a),h.setCell(s,e,r),h.setCell(s,i,n)}else if(5===d){let o=void 0!==c[s][l[2]]?c[s][l[2]].value:"",d=void 0!==c[s][l[3]]?c[s][l[3]].value:"";n="<b>"+(void 0!==c[s][l[4]]?"<a href='"+c[s][l[4]].value+"'>"+o+"</a>":o)+"</b><br/>"+d,h.setCell(s,t,a),h.setCell(s,e,r),h.setCell(s,i,n)}else if(4===d){n="<b>"+(void 0!==c[s][l[2]]?c[s][l[2]].value:"")+"</b><br/>"+(void 0!==c[s][l[3]]?c[s][l[3]].value:""),h.setCell(s,t,a),h.setCell(s,e,r),h.setCell(s,i,n)}else if(3===d){n="<b>"+(void 0!==c[s][l[2]]?c[s][l[2]].value:"")+"</br>",h.setCell(s,t,a),h.setCell(s,e,r),h.setCell(s,i,n)}else 2===d&&(h.setCell(s,t,a),h.setCell(s,e,r))}}if(""!==o)return i(Error(o));new google.visualization.Map(document.getElementById(e.container.id)).draw(h,s)}catch(t){console.log(t),f.displayFeedback(e.container,n.ERROR_CHART,[t]),f.log(e.container,"Chart finished with error : "+e.container.id)}}),a()}))}}tt._isInit=!1;class et extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["orgchart"]}),et._isInit=!0}get icon(){return"fa fa-sitemap"}get label(){return"OrgChart"}get subtext(){return"OrgChart"}get classFullName(){return"google.visualization.OrgChart"}get tutorialFilename(){return"tutorial-google_visualization_OrgChart.html"}draw(t){let e=this;return new Promise((function(a,i){let r=500;""!==e.height&&(r=j.decodeFormatSize(e.height));let s=Object.assign({allowHtml:!0},e.options);return s=Object.assign(s,{width:j.decodeFormatSize(e.width),height:r}),et._isInit||et.init(),google.charts.setOnLoadCallback(()=>{try{let a=new B(t);new google.visualization.OrgChart(document.getElementById(e.container.id)).draw(a.getDataTable(),s)}catch(t){console.log(t),f.displayFeedback(e.container,n.ERROR_CHART,[t]),f.log(e.container,"Chart finished with error : "+e.container.id)}}),a()}))}}et._isInit=!1;class at extends r{constructor(){super(),this.addScript("https://www.gstatic.com/charts/loader.js")}get icon(){return"fas fa-chart-pie"}get label(){return"Pie"}get subtext(){return"Pie"}get classFullName(){return"google.visualization.Pie"}get tutorialFilename(){return"tutorial-google_visualization_Pie.html"}static init(){google.charts.load("current",{packages:["corechart"]}),at._isInit=!0}draw(t){let e=this;return new Promise((function(a,i){let r=500;""!==e.height&&(r=j.decodeFormatSize(e.height));let s=Object.assign({},e.options);return s=Object.assign(s,{width:j.decodeFormatSize(e.width),height:r}),at._isInit||at.init(),google.charts.setOnLoadCallback(()=>{try{let a=new B(t);new google.visualization.PieChart(document.getElementById(e.container.id)).draw(a.getDataTable(),s)}catch(t){console.log(t),f.displayFeedback(e.container,n.ERROR_CHART,[t]),f.log(e.container,"Chart finished with error : "+e.container.id)}}),a()}))}}at._isInit=!1;class it extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["corechart"]}),it._isInit=!0}get icon(){return"fa fa-circle"}get label(){return"ScatterChart"}get subtext(){return"ScatterChart"}get classFullName(){return"google.visualization.ScatterChart"}get tutorialFilename(){return"tutorial-google_visualization_ScatterChart.html"}draw(t){let e=this;return new Promise((function(a,i){let r=500;""!==e.height&&(r=j.decodeFormatSize(e.height));let s=Object.assign({},e.options);return s=Object.assign(s,{width:j.decodeFormatSize(e.width),height:r}),it._isInit||it.init(),google.charts.setOnLoadCallback(()=>{try{let a=new B(t);new google.visualization.ScatterChart(document.getElementById(e.container.id)).draw(a.getDataTable(),s)}catch(t){console.log(t),f.displayFeedback(e.container,n.ERROR_CHART,[t]),f.log(e.container,"Chart finished with error : "+e.container.id)}}),a()}))}}it._isInit=!1;class rt extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["corechart"]}),rt._isInit=!0}get icon(){return"fas fa-chart-area"}get label(){return"SteppedAreaChart"}get subtext(){return"SteppedAreaChart"}get classFullName(){return"google.visualization.SteppedAreaChart"}get tutorialFilename(){return"tutorial-google_visualization_SteppedAreaChart.html"}draw(t){let e=this;return new Promise((function(a,i){let r=500;""!==e.height&&(r=j.decodeFormatSize(e.height));let s=Object.assign({},e.options);return s=Object.assign(s,{width:j.decodeFormatSize(e.width),height:r}),rt._isInit||rt.init(),google.charts.setOnLoadCallback(()=>{try{let a=new B(t);new google.visualization.SteppedAreaChart(document.getElementById(e.container.id)).draw(a.getDataTable(),s)}catch(t){console.log(t),f.displayFeedback(e.container,n.ERROR_CHART,[t]),f.log(e.container,"Chart finished with error : "+e.container.id)}}),a()}))}}rt._isInit=!1;class nt extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["table"]}),nt._isInit=!0}get icon(){return"fa fa-table"}get label(){return"Table"}get subtext(){return"Table"}get classFullName(){return"google.visualization.Table"}get tutorialFilename(){return"tutorial-google_visualization_Table.html"}draw(t){let e=this;return new Promise((function(a,i){let r="100%";""!==e.height&&(r=j.decodeFormatSize(e.height));let s=Object.assign({raw:!0,showRowNumber:!1},e.options);return s=Object.assign(s,{width:j.decodeFormatSize(e.width),height:r}),nt._isInit||nt.init(),google.charts.setOnLoadCallback(()=>{try{let a=new B(t,s.raw);new google.visualization.Table(document.getElementById(e.container.id)).draw(a.getDataTable(),s)}catch(t){console.log(t),f.displayFeedback(e.container,n.ERROR_CHART,[t]),f.log(e.container,"Chart finished with error : "+e.container.id)}}),a()}))}}nt._isInit=!1;class st extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["timeline"]}),st._isInit=!0}get icon(){return"fa fa-tasks"}get label(){return"Timeline"}get subtext(){return"Timeline"}get classFullName(){return"google.visualization.Timeline"}get tutorialFilename(){return"tutorial-google_visualization_Timeline.html"}draw(t){let e=this;return new Promise((function(a,i){let r=500;""!==e.height&&(r=j.decodeFormatSize(e.height));let s=Object.assign({},e.options);return s=Object.assign(s,{width:j.decodeFormatSize(e.width),height:r}),st._isInit||st.init(),google.charts.setOnLoadCallback(()=>{try{let a=new B(t);new google.visualization.Timeline(document.getElementById(e.container.id)).draw(a.getDataTable(),s)}catch(t){console.log(t),f.displayFeedback(e.container,n.ERROR_CHART,[t]),f.log(e.container,"Chart finished with error : "+e.container.id)}}),a()}))}}st._isInit=!1;class ot extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["treemap"]}),ot._isInit=!0}get icon(){return"fas fa-chart-area"}get label(){return"TreeMap"}get subtext(){return"TreeMap"}get classFullName(){return"google.visualization.TreeMap"}get tutorialFilename(){return"tutorial-google_visualization_TreeMap.html"}draw(t){let e=this;return new Promise((function(a,i){let r=500;""!==e.height&&(r=j.decodeFormatSize(e.height));let s=Object.assign({},e.options);return s=Object.assign(s,{width:j.decodeFormatSize(e.width),height:r}),ot._isInit||ot.init(),google.charts.setOnLoadCallback(()=>{try{let a=new B(t);new google.visualization.TreeMap(document.getElementById(e.container.id)).draw(a.getDataTable(),s)}catch(t){console.log(t),f.displayFeedback(e.container,n.ERROR_CHART,[t]),f.log(e.container,"Chart finished with error : "+e.container.id)}}),a()}))}}ot._isInit=!1;class lt extends r{constructor(){super();this.addScript("https://www.gstatic.com/charts/loader.js")}static init(){google.charts.load("current",{packages:["corechart"]}),lt._isInit=!0}get icon(){return"fas fa-chart-line"}get label(){return"Trendline"}get subtext(){return"Trendline"}get classFullName(){return"google.visualization.Trendline"}get tutorialFilename(){return"tutorial-google_visualization_Trendline.html"}draw(t){let e=this;return new Promise((function(a,i){let r=500;""!==e.height&&(r=j.decodeFormatSize(e.height));let s=Object.assign({trendlines:{0:{}}},e.options);return s=Object.assign(s,{width:j.decodeFormatSize(e.width),height:r}),lt._isInit||lt.init(),google.charts.setOnLoadCallback(()=>{try{let a=new B(t);new google.visualization.ScatterChart(document.getElementById(e.container.id)).draw(a.getDataTable(),s)}catch(t){console.log(t),f.displayFeedback(e.container,n.ERROR_CHART,[t]),f.log(e.container,"Chart finished with error : "+e.container.id)}}),a()}))}}lt._isInit=!1;const ct=Object.freeze({__proto__:null,AnnotationChart:M,AreaChart:H,BarChart:U,BubbleChart:q,Calendar:W,CandlestickChart:G,ColumnChart:X,ComboChart:Y,GeoChart:K,Histogram:V,IntervalChart:J,LineChart:Z,Map:tt,OrgChart:et,Pie:at,ScatterChart:it,SteppedAreaChart:rt,Table:nt,Timeline:st,TreeMap:ot,Trendline:lt});var dt=Object.freeze({__proto__:null,visualization:ct,Data:B,Tools:j,API:Q});const ut=Object.freeze({__proto__:null,AreaChart:class extends r{get icon(){return"fas fa-chart-area"}get label(){return"AreaChart"}get subtext(){return"AreaChart"}get classFullName(){return"d3.visualization.AreaChart"}get tutorialFilename(){return"tutorial-d3_visualization_AreaChart.html"}constructor(){super();this.addScript(w.path+"lib/d3/d3.min.js")}draw(t){let e=this;return new Promise((function(t,a){console.log("test");let i="100%";""!==e.height&&(i=e.height);Object.assign({showRowNumber:!1,width:e.width,height:i},e.options);let r=d3.select("#"+e.container.id),n=r.node();if(n){let t=0!==n.clientWidth?n.clientWidth:300,e=0!==n.clientHeight?n.clientHeight:150,a=r.append("svg").attr("width",t).attr("height",e).attr("id","idtest"),i={top:20,right:20,bottom:30,left:40},s=t-(i.left+i.right),o=e-(i.top+i.bottom),l=d3.scaleLinear(),c=d3.scaleLinear(),d=d3.axisBottom(),u=d3.axisLeft();l.domain([0,100]).range([0,s]),c.domain([0,100]).range([o,0]),d.scale(l),u.scale(c);a.append("g").attr("transform","translate("+[i.left,o+i.top]+")").call(d),a.append("g").attr("transform","translate("+[i.left,i.top]+")").call(u)}return t()}))}},BarChart:class extends r{get icon(){return"far fa-chart-bar"}get label(){return"BarChart"}get subtext(){return"BarChart"}get classFullName(){return"d3.visualization.BarChart"}get tutorialFilename(){return"tutorial-d3_visualization_BarChart.html"}constructor(){super();this.addScript(w.path+"lib/d3/d3.min.js")}draw(t){let e=this;return new Promise((function(a,i){let r="100%";""!==e.height&&(r=e.height);Object.assign({showRowNumber:!1,width:e.width,height:r},e.options);let n,s,o=t.head.vars,l=t.results.bindings,c=(o.length,l.length,[]);for(let t of l)n=t[o[0]].value,s=Number(t[o[1]].value),void 0===n||void 0===s?f.logSimple("Erreur ? D3JS:pie label "+n+" count "+s):c.push({label:n,count:s});let d=d3.select("#"+e.container.id),u=d.node();if(u){let t=0!==u.clientWidth?u.clientWidth:300,e=0!==u.clientHeight?u.clientHeight:150,a=d.append("svg").attr("width",t).attr("height",e).attr("id","idtest");a=a.append("g").attr("transform","translate("+t/2+","+e/2+")");a.selectAll("rect").data(c).enter().append("rect").attr("width",(function(t){return t.count/1e4})).attr("height",50).attr("y",(function(t,e){return 50*e})).attr("fill","#3399FF");console.log("dataset : "+c)}return a()}))}},BubbleChart:class extends r{get icon(){return"fas fa-chart-pie"}get label(){return"BubbleChart"}get subtext(){return"BubbleChart"}get classFullName(){return"d3.visualization.BubbleChart"}get tutorialFilename(){return"tutorial-d3_visualization_BubbleChart.html"}constructor(){super();this.addScript(w.path+"lib/d3/d3.min.js")}draw(t){let e=this;return new Promise((function(a,i){let r="100%";""!==e.height&&(r=e.height);Object.assign({showRowNumber:!1,width:e.width,height:r},e.options);let n=t.head.vars,s=t.results.bindings,o=(n.length,s.length,d3.select("#"+e.container.id)),l=o.node();if(l){let t=0!==l.clientWidth?l.clientWidth:300,e=0!==l.clientHeight?l.clientHeight:150,a=o.append("svg").attr("width",t).attr("height",e).attr("id","idtest"),i={top:20,right:20,bottom:30,left:40},r=t-(i.left+i.right),n=e-(i.top+i.bottom),s=d3.scaleLinear(),c=d3.scaleLinear(),d=d3.axisBottom(),u=d3.axisLeft();s.domain([0,100]).range([0,r]),c.domain([0,100]).range([n,0]),d.scale(s),u.scale(c);a.append("g").attr("transform","translate("+[i.left,n+i.top]+")").call(d),a.append("g").attr("transform","translate("+[i.left,i.top]+")").call(u)}return a()}))}},ColumnChart:class extends r{get icon(){return"far fa-chart-bar"}get label(){return"ColumnChart"}get subtext(){return"ColumnChart"}get classFullName(){return"d3.visualization.ColumnChart"}get tutorialFilename(){return"tutorial-d3_visualization_ColumnChart.html"}constructor(){super();this.addScript(w.path+"lib/d3/d3.min.js")}draw(t){let e=this;return new Promise((function(t,a){let i="100%";""!==e.height&&(i=e.height);Object.assign({showRowNumber:!1,width:e.width,height:i},e.options);return t()}))}},Line:class extends r{get icon(){return"fas fa-chart-line"}get label(){return"Line"}get subtext(){return"Line"}get classFullName(){return"d3.visualization.Line"}get tutorialFilename(){return"tutorial-d3_visualization_Line.html"}constructor(){super();this.addScript(w.path+"lib/d3/d3.min.js")}draw(t){let e=this;return new Promise((function(a,i){let r="100%";""!==e.height&&(r=e.height);Object.assign({showRowNumber:!0,width:e.width,height:r},e.options);let n,s,o=t.head.vars,l=t.results.bindings,c=(o.length,l.length,[]);for(let t of l)n=t[o[0]].value,s=Number(t[o[1]].value),void 0===n||void 0===s?f.logSimple("Erreur ? D3JS:pie label "+n+" count "+s):c.push({label:n,count:s});console.log(c);let d=30,u=60,h=30,g=70,p=800-g-u,m=570-d-h,b=d3.scalePoint().domain(c.map((function(t){return t.label}))).rangeRound([0,800]).padding(.5),w=d3.axisBottom().scale(b).ticks(15),v=d3.scaleLinear().range([m,0]);v.domain([0,d3.max(c,(function(t){return t.count}))]);let _=d3.axisLeft().scale(v).ticks(17),A=d3.line().x((function(t){return b(t.label)})).y((function(t){return v(t.count)})),T=d3.select("#"+e.container.id).append("svg").attr("width",p+g+u).attr("height",m+d+h).append("g").attr("transform","translate("+g+","+d+")");return T.append("path").attr("fill","none").attr("stroke","steelblue").attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("stroke-width",1.5).attr("d",A(c)),T.append("g").attr("class","x axis").attr("transform","translate(0,"+m+")").call(w),T.append("g").attr("class","y axis").call(_),a()}))}},Pie:class extends r{get icon(){return"fas fa-chart-pie"}get label(){return"Pie"}get subtext(){return"Pie"}get classFullName(){return"d3.visualization.Pie"}get tutorialFilename(){return"tutorial-d3_visualization_Pie.html"}constructor(){super();this.addScript(w.path+"lib/d3/d3.min.js")}draw(t){let e=this;return new Promise((function(a,i){let r="100%";""!==e.height&&(r=e.height);Object.assign({showRowNumber:!1,width:e.width,height:r},e.options);let n,s,o=t.head.vars,l=t.results.bindings,c=(o.length,l.length,[]);for(let t of l)n=t[o[0]].value,s=Number(t[o[1]].value),void 0===n||void 0===s?f.logSimple("Erreur ? D3JS:pie label "+n+" count "+s):c.push({label:n,count:s});let d=d3.select("#"+e.container.id),u=d.node();if(u){let t=0!==u.clientWidth?u.clientWidth:300,e=0!==u.clientHeight?u.clientHeight:150,a=d.append("svg").attr("width",t).attr("height",e).attr("id","idtest"),i=Math.min(t,e)/2;a=a.append("g").attr("transform","translate("+t/2+","+e/2+")");let r=18,n=4,s=d3.scaleOrdinal(d3.schemeCategory10),o=d3.arc().innerRadius(0).outerRadius(i),l=d3.pie().value((function(t){return t.count})).sort(null),h=(a.selectAll("path").data(l(c)).enter().append("path").attr("d",o).attr("fill",(function(t,e){return s(t.data.label)})),a.selectAll(".legend").data(s.domain()).enter().append("g").attr("class","legend").attr("transform",(function(t,e){let a=r+n,o=a*s.domain().length/2;return"translate("+(-2*r+2*i+20)+","+(e*a-o)+")"})));h.append("rect").attr("width",r).attr("height",r).style("fill",s).style("stroke",s),h.append("text").attr("x",r+n).attr("y",r-n).text((function(t){return t}))}return a()}))}},ScatterChart:class extends r{get icon(){return"fa fa-ScatterChart-chart"}get label(){return"ScatterChart"}get subtext(){return"ScatterChart"}get classFullName(){return"d3.visualization.ScatterChart"}get tutorialFilename(){return"tutorial-d3_visualization_ScatterChart.html"}constructor(){super();this.addScript(w.path+"lib/d3/d3.min.js")}draw(t){let e=this;return new Promise((function(a,i){let r="500";""!==e.height&&(r=e.height);Object.assign({showRowNumber:!1,width:e.width,height:r},e.options);let n,s,o=t.head.lets,l=t.results.bindings,c=(o.length,l.length,[]);for(let t of l)n=t[o[0]].value,s=Number(t[o[1]].value),void 0===n||void 0===s?f.logSimple("Erreur ? D3JS:ScatterChart label "+n+" count "+s):c.push({label:n,count:s});return console.log(c),a()}))}}});var ht=Object.freeze({__proto__:null,visualization:ut});class gt{static get osmAccessToken(){return this._osmAccessToken}static set osmAccessToken(t){this._osmAccessToken=t}}gt._osmAccessToken="";class pt extends r{get icon(){return"fa fa-map"}get label(){return"Map"}get subtext(){return"Map"}get classFullName(){return"leaflet.visualization.Map"}get tutorialFilename(){return"tutorial-leaflet_visualization_Map.html"}constructor(){super(),this.addCss(w.path+"lib/leaflet/leaflet.css"),this.addCss(w.path+"lib/leaflet/MarkerCluster.Default.css");let t=this.addScript(w.path+"lib/leaflet/leaflet.js");this.addScript(w.path+"lib/leaflet/leaflet.markercluster.js",t)}draw(t){let e=this;return new Promise((function(a,i){let r,n,s,o,l,c,d,u,h,g,p,m,b,f,w,v,_,A,T,I,z,x,P,D="",k="Incorrect parameters. Parameters of chart : [ wktLiteral(geosparql:wktLiteral) | latitude(xsd:Decimal) longitude(xsd:Decimal)]  title(xsd:string optional) introduction(xsd:string optional) link(IRI optional) image(IRI optional). ",F=t.head.vars,j=t.results.bindings,B=F.length,M=j.length,H="180px",U=e.container.id+"-leaflet",q=document.getElementById(e.container.id),W=[];""!==e.height&&(H=e.height);let G=Object.assign({width:e.width,height:H,tileLayerTemplate:"https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",tileLayerAttributionHTML:' <a href="https://www.mapbox.com/about/maps/" target=\'_blank\'>Mapbox</a>  <a href="http://www.openstreetmap.org/copyright" target=\'_blank\'>OpenStreetMap</a> <strong><a href="https://www.mapbox.com/map-feedback/" target="_blank">Improve this map</a></strong>',tileLayerAttribution:null,tileLayerAttributionLink:null,tileLayerId:"mapbox/streets-v11",tileLayerAccessToken:gt.osmAccessToken,tileLayerTileSize:512,tileLayerZoomOffset:-1,tileLayerTms:!1,tileLayerZoom:13},e.options);if(q){q.innerHTML="<div id='"+U+"' style='width: "+G.width+"; height: "+G.height+";'></div>",g=null!=G.tileLayerAttribution?null!=G.tileLayerAttributionLink?'<a href="'+G.tileLayerAttributionLink+"\" target='_blank'>"+G.tileLayerAttribution+"</a>":G.tileLayerAttribution:G.tileLayerAttributionHTML;let t=new L.tileLayer(G.tileLayerTemplate,{attribution:g,tileSize:G.tileLayerTileSize,zoomOffset:G.tileLayerZoomOffset,maxZoom:18,id:G.tileLayerId,accessToken:G.tileLayerAccessToken,tms:G.tileLayerTms,zoom:G.tileZoom});if(r=L.map(U,{layers:[t]}),s=L.markerClusterGroup({chunkedLoading:!0,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0}),B<1)D=k;else for(let t of j)if("uri"!==t[F[0]].type)if(u=t[F[0]].datatype,"http://www.opengis.net/ont/geosparql#wktLiteral"==u){d=t[F[0]].value;try{if(h=R.create(d),h instanceof C)v=h,l=h.lat,c=h.long,o=L.marker([l,c]),o=pt.readOtherParametersWithPoint(t,F.slice(1),o),s.addLayer(o),W.push(o);else if(h instanceof O){_=h,p=[];for(let t of _.points)p.push([t.lat,t.long]);m=L.polyline(p,{color:"red"}),m=pt.readOtherParametersWithPoint(t,F.slice(1),m),m.addTo(r),W.push(m)}else if(h instanceof E)A=h,b=[[A.minLat,A.minLong],[A.maxLat,A.maxLong]],f=L.rectangle(b,{color:"#ff7800",weight:1}),f=pt.readOtherParametersWithPoint(t,F.slice(1),f),f.addTo(r),W.push(f);else if(h instanceof y){T=h,z=[];for(let t of T.points)z.push([t.lat,t.long]);w=L.polygon(z,{color:"green",weight:1}),w=pt.readOtherParametersWithPoint(t,F.slice(1),w),w.addTo(r),W.push(w)}else if(h instanceof S){I=h;for(let e of I.polygons){z=[];for(let t of e.points)z.push([t.lat,t.long]);w=L.polygon(z,{color:"green",weight:1}),w=pt.readOtherParametersWithPoint(t,F.slice(1),w),w.addTo(r),W.push(w)}}}catch(t){if(!(t instanceof N))throw t;D=t.message}}else l=parseFloat(t[F[0]].value),c=parseFloat(t[F[1]].value),isNaN(l)||isNaN(c)?D=k:(o=L.marker([l,c]),o=pt.readOtherParametersWithPoint(t,F.slice(2),o),s.addLayer(o),W.push(o));else{x=t[F[0]].value;let e=new XMLHttpRequest;e.open("GET",x,!1),e.send(null),200===e.status&&(P=L.geoJSON(JSON.parse(e.response)),P.addTo(r),W.push(P))}return""!==D?i(Error(D)):(M>0?(r.addLayer(s),n=L.featureGroup(W),r.fitBounds(n.getBounds())):r.fitWorld({reset:!0}).zoomIn(),a())}}))}static readOtherParametersWithPoint(t,e,a){const i=void 0!==t[e[0]]?t[e[0]].value:void 0,r=void 0!==t[e[1]]?t[e[1]].value:void 0,n=void 0!==t[e[2]]?t[e[2]].value:void 0,s=void 0!==t[e[3]]?t[e[3]].value:void 0;return void 0===i&&void 0===r&&void 0===n&&void 0===s||(void 0!==s?void 0!==i&&void 0!==r&&void 0!==n?a.bindPopup("<div style=\"display: flow-root;min-height:150px;\"><a style='font-size: large;font-style: normal;' href='"+n+"' target='_blank'>"+i+"</a><div style=\"display: table-cell;vertical-align: top\"><p style='margin: 0px'>"+r+'</p></div><div style="display: table-cell;"><a href=\''+n+"' target='_blank'><img src='"+s+"' style='margin-left:5px;margin-bottom:5px;width:150px;float:right;'/></a></div></div>"):void 0!==i&&void 0!==r?a.bindPopup("<div style=\"display: flow-root;min-height:150px;min-height:150px;\"><span style='font-size: large;font-style: normal;'>"+i+"</span><div style=\"display: table-cell;vertical-align: top\"><p style='margin: 0px'>"+r+'</p></div><div style="display: table-cell;"><a href=\''+s+"' target='_blank'><img src='"+s+"' style='margin-left:5px;margin-bottom:5px;width:150px;float:right;'/></a></div></div>"):void 0!==i&&void 0!==n?a.bindPopup("<div style=\"display: flow-root;min-height:150px;min-height:150px;\"><a style='font-size: large;font-style: normal;' href='"+n+"' target='_blank'>"+i+'</a><div style="display: table-cell;"><a href=\''+n+"' target='_blank'><img src='"+s+"' style='margin-left:5px;margin-bottom:5px;width:150px;float:right;'/></a></div></div>"):void 0!==i?a.bindPopup("<div style=\"display: flow-root;min-height:150px;min-height:150px;\"><span style='font-size: large;font-style: normal;'>"+i+'</span><div style="display: table-cell;"><a href=\''+s+"' target='_blank'><img src='"+s+"' style='margin-left:5px;margin-bottom:5px;width:150px;float:right;'/></a></div></div>"):a.bindPopup('<div style="display: table-cell;"><a href=\''+s+"' target='_blank'><img src='"+s+"' style='margin-left:5px;margin-bottom:5px;width:150px;float:right;'/></a></div>"):void 0!==i&&void 0!==r&&void 0!==n?a.bindPopup("<a style='font-size: large;font-style: normal;' href='"+n+"' target='_blank'>"+i+"</a><p style='margin: 0px'>"+r+"</p>"):void 0!==i&&void 0!==r?a.bindPopup("<span style='font-size: large;font-style: normal;'>"+i+"</span><p style='margin: 0px'>"+r+"</p>"):void 0!==i&&void 0!==n?a.bindPopup("<a style='font-size: large;font-style: normal;' href='"+n+"' target='_blank'>"+i+"</a>"):void 0!==i&&a.bindPopup("<span style='font-size: large;font-style: normal;'>"+i+"</span>")),a}}const mt=Object.freeze({__proto__:null,Map:pt});const bt=x,ft=F,wt=dt,vt=ht,_t=Object.freeze({__proto__:null,visualization:mt,API:gt}),At=w.VERSION,Tt=w.HOMEPAGE;function Rt(){A.loadAllDependencies()}function Ct(t){t&&"object"==typeof t&&(wt.API.key=t.googleApiKey?t.googleApiKey:"",_t.API.osmAccessToken=t.osmAccessToken?t.osmAccessToken:"",t.path?w.path=t.path.endsWith("/")?t.path:t.path+"/":w.path="")}function Ot(t,e){return Ct(e),A.drawWithElementId(t),f}function Et(t){return Ct(t),A.drawAll(),f}function yt(t){return p.drawWithElementId(t),f}function St(){return p.drawAll(),f}function Nt(t,e){return p.getChartDoc(t,e)}function It(t){let e="";return A.list.forEach(a=>{a.id===t&&(e=a.chart.newOptionsRaw)}),e}function zt(t){return b.encodeHtml(t)}function Lt(t){return b.decodeHtml(t)}function xt(t,e,a,i){let r=document.getElementById(t),n=document.getElementById(e),s=document.getElementById(a);if(r&&(n&&(n.textContent=(new XMLSerializer).serializeToString(r).replace(/&#10;/g,"\n").replace(/xmlns="http:\/\/www.w3.org\/1999\/xhtml"/g,"").replace(/ data-/gm,"\ndata-")),s)){let e='<script src="../browser/sgvizler2.js"><\/script>\n<script>\n';i?(e+='var options = {\n             googleApiKey : "YOUR_GOOGLE_MAP_API_KEY",\n             //OpenStreetMap Access Token\n             // https://www.mapbox.com/\n             osmAccessToken:  "YOUR_OSM_ACCESS_TOKEN"\n};\n',e+="//Draw a chart\n//sgvizler2.containerDraw('result',options);\n//or\n//$(\"#result\").containerchart(options);\n\n//Draw all Chart\nsgvizler2.containerDrawAll(options);\n"):e+="//Draw a chart\n//sgvizler2.containerDraw('"+t+"');\n//or\n//$(\"#"+t+'").containerchart();\n\n//Draw all Chart\nsgvizler2.containerDrawAll();\n',e+="<\/script>",s.textContent=e}}function Pt(t,e){$("#"+t).before('<ul class="nav nav-tabs" role="tablist" idDivOfSgvizler="'+t+'tab">\n    <li class="nav-item">\n         <a class="nav-link active" data-toggle="tab" href="#'+t+'Tab" role="tab" aria-expanded="true">Result</a>\n         </li>\n         <li class="nav-item">\n         <a class="nav-link" data-toggle="tab" href="#'+t+'htmlTab" role="tab" aria-expanded="false">HTML</a>\n         </li>\n         <li class="nav-item">\n         <a class="nav-link" data-toggle="tab" href="#'+t+'scriptTab" role="tab" aria-expanded="false">Javascript</a>\n         </li>\n</ul>\n<div class="tab-content">\n         <div class="tab-pane active" id="'+t+'Tab" role="tabpanel" aria-expanded="true">              <div id="'+t+'example" style="padding: 25px;"></div>         </div>\n         <div class="tab-pane" id="'+t+'htmlTab" role="tabpanel" aria-expanded="false">\n            <div class="bg-faded" style="padding: 25px;"><pre lang="html" id="'+t+'Html"></pre></div>\n         </div>\n         <div class="tab-pane" id="'+t+'scriptTab" role="tabpanel" aria-expanded="false">\n            <div class="bg-faded" style="padding: 25px;"><pre lang="html" id="'+t+'Script"></pre></div>\n         </div>\n</div>');var a=$("#"+t).detach();$("#"+t+"example").append(a),xt(t,t+"Html",t+"Script",e)}function Dt(t,e,a,i,r,n,s,o,l,c){return A.create(t,e,a,i,r,n,s,o,l,c)}jQuery.fn.extend({selectchart:function(t,e){let a="render";return t&&("string"==typeof t?a=t:"object"==typeof t&&(a=t.action?t.action:a)),this.each((function(e,i){e>=0&&"render"===a&&(t&&"object"==typeof t?p.draw(i,t):p.draw(i))}))},containerchart:function(t,e){let a="render";return t&&("string"==typeof t?a=t:"object"==typeof t&&(a=t.action?t.action:a)),this.each((function(e,i){e>=0&&"render"===a&&(t&&"object"==typeof t&&Ct(t),A.drawWithElementId($(i).attr("id")))}))}}),c.detectRoot(),t.HOMEPAGE=Tt,t.VERSION=At,t.bordercloud=ft,t.containerDraw=Ot,t.containerDrawAll=Et,t.containerLoadAll=Rt,t.create=Dt,t.d3=vt,t.decodeHtml=Lt,t.encodeHtml=zt,t.getChartDoc=Nt,t.getChartOptions=It,t.giveHTMLAndScript=xt,t.google=wt,t.leaflet=_t,t.selectDraw=yt,t.selectDrawAll=St,t.sgvizler=bt,t.showTabHtmlAndScript=Pt,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=sgvizler2.min.js.map
